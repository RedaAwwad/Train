(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{477:function(t,o,n){var e,r,h;h=function(t){function o(t,o,q,n){t.hasOwnProperty(o)||(t[o]=n.apply(null,q),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t=t?t._modules:{},"Extensions/Annotations/AnnotationChart.js",[t["Core/Utilities.js"]],(function(t){function o(a,t){return a=this.initAnnotation(a),this.options.annotations.push(a.options),d(t,!0)&&(a.redraw(),a.graphic.attr({opacity:1})),a}function u(){var a=this;a.plotBoxClip=this.renderer.clipRect(this.plotBox),a.controlPointsGroup=a.renderer.g("control-points").attr({zIndex:99}).clip(a.plotBoxClip).add(),a.options.annotations.forEach((function(t,g){if(!a.annotations.some((function(a){return a.options===t}))){var b=a.initAnnotation(t);a.options.annotations[g]=b.options}})),a.drawAnnotations(),b(a,"redraw",a.drawAnnotations),b(a,"destroy",(function(){a.plotBoxClip.destroy(),a.controlPointsGroup.destroy()})),b(a,"exportData",(function(t){var g=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,b=!t.dataRows[1].xValues,o=a.options.lang&&a.options.lang.exportData&&a.options.lang.exportData.annotationHeader,n=function(a){if(g){var t=g(a);if(!1!==t)return t}return t=o+" "+a,b?{columnTitle:t,topLevelColumnTitle:t}:t},e=t.dataRows[0].length,r=a.options.exporting&&a.options.exporting.csv&&a.options.exporting.csv.annotations&&a.options.exporting.csv.annotations.itemDelimiter,h=a.options.exporting&&a.options.exporting.csv&&a.options.exporting.csv.annotations&&a.options.exporting.csv.annotations.join;a.annotations.forEach((function(a){a.options.labelOptions&&a.options.labelOptions.includeInDataExport&&a.labels.forEach((function(a){if(a.options.text){var g=a.options.text;a.points.forEach((function(a){var b=a.x,o=a.series.xAxis?a.series.xAxis.options.index:-1,n=!1;if(-1===o){a=t.dataRows[0].length;for(var l=Array(a),p=0;p<a;++p)l[p]="";l.push(g),l.xValues=[],l.xValues[o]=b,t.dataRows.push(l),n=!0}if(n||t.dataRows.forEach((function(a){!n&&a.xValues&&void 0!==o&&b===a.xValues[o]&&(h&&a.length>e?a[a.length-1]+=r+g:a.push(g),n=!0)})),!n){for(a=t.dataRows[0].length,l=Array(a),p=0;p<a;++p)l[p]="";l[0]=b,l.push(g),l.xValues=[],void 0!==o&&(l.xValues[o]=b),t.dataRows.push(l)}}))}}))}));var p=0;t.dataRows.forEach((function(a){p=Math.max(p,a.length)}));for(var l=p-t.dataRows[0].length,c=0;c<l;c++){var d=n(c+1);b?(t.dataRows[0].push(d.topLevelColumnTitle),t.dataRows[1].push(d.columnTitle)):t.dataRows[0].push(d)}}))}function n(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach((function(a){a.redraw(),a.graphic.animate({opacity:1},a.animationConfig)}))}function e(a){var b=this.annotations,t="annotations"===a.coll?a:c(b,(function(t){return t.options.id===a}));t&&(g(t,"remove"),l(this.options.annotations,t.options),l(b,t),t.destroy())}function r(){this.annotations=[],this.options.annotations||(this.options.annotations=[])}function a(a){this.chart.hasDraggedAnnotation||a.apply(this,Array.prototype.slice.call(arguments,1))}var h,b=t.addEvent,l=t.erase,c=t.find,g=t.fireEvent,d=t.pick,f=t.wrap,v=[];return function(t){t.compose=function(t,g,h){-1===v.indexOf(g)&&(v.push(g),b(g,"afterInit",r),(g=g.prototype).addAnnotation=o,g.callbacks.push(u),g.collectionsWithInit.annotations=[o],g.collectionsWithUpdate.push("annotations"),g.drawAnnotations=n,g.removeAnnotation=e,g.initAnnotation=function(a){return a=new(t.types[a.type]||t)(this,a),this.annotations.push(a),a}),-1===v.indexOf(h)&&(v.push(h),f(h.prototype,"onContainerMouseDown",a))}}(h||(h={})),h})),o(t,"Extensions/Annotations/AnnotationDefaults.js",[t["Core/Utilities.js"]],(function(t){var o=t.defined;return{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return o(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{symbol:"circle",width:10,height:10,style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},visible:!1,events:{}},events:{},zIndex:6}})),o(t,"Extensions/Annotations/EventEmitter.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],(function(t,o){var u=t.doc,n=t.isTouchDevice,e=o.addEvent,r=o.fireEvent,a=o.objectEach,b=o.pick,h=o.removeEvent;return function(){function t(){}return t.prototype.addEvents=function(){var t=this,b=function(a){e(a,n?"touchstart":"mousedown",(function(a){t.onMouseDown(a)}),{passive:!1})};if(b(this.graphic.element),(t.labels||[]).forEach((function(a){a.options.useHTML&&a.graphic.text&&b(a.graphic.text.element)})),a(t.options.events,(function(a,b){var o=function(o){"click"===b&&t.cancelClick||a.call(t,t.chart.pointer.normalize(o),t.target)};-1===(t.nonDOMEvents||[]).indexOf(b)?t.graphic.on(b,o):e(t,b,o,{passive:!1})})),t.options.draggable&&(e(t,"drag",t.onDrag),!t.graphic.renderer.styledMode)){var o={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[t.options.draggable]};t.graphic.css(o),(t.labels||[]).forEach((function(a){a.options.useHTML&&a.graphic.text&&a.graphic.text.css(o)}))}t.isUpdating||r(t,"add")},t.prototype.destroy=function(){this.removeDocEvents(),h(this),this.hcEvents=null},t.prototype.mouseMoveToRadians=function(a,t,b){var o=a.prevChartY-b,g=a.prevChartX-t;return b=a.chartY-b,a=a.chartX-t,this.chart.inverted&&(t=g,g=o,o=t,t=a,a=b,b=t),Math.atan2(b,a)-Math.atan2(o,g)},t.prototype.mouseMoveToScale=function(a,t,b){return t=(a.chartX-t||1)/(a.prevChartX-t||1),a=(a.chartY-b||1)/(a.prevChartY-b||1),this.chart.inverted&&(b=a,a=t,t=b),{x:t,y:a}},t.prototype.mouseMoveToTranslation=function(a){var t=a.chartX-a.prevChartX;if(a=a.chartY-a.prevChartY,this.chart.inverted){var b=a;a=t,t=b}return{x:t,y:a}},t.prototype.onDrag=function(a){if(this.chart.isInsidePlot(a.chartX-this.chart.plotLeft,a.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){var t=this.mouseMoveToTranslation(a);"x"===this.options.draggable&&(t.y=0),"y"===this.options.draggable&&(t.x=0),this.points.length?this.translate(t.x,t.y):(this.shapes.forEach((function(a){return a.translate(t.x,t.y)})),this.labels.forEach((function(a){return a.translate(t.x,t.y)}))),this.redraw(!1)}},t.prototype.onMouseDown=function(a){if(a.preventDefault&&a.preventDefault(),2!==a.button){var t=this,o=t.chart.pointer,g=(a=o.normalize(a)).chartX,h=a.chartY;t.cancelClick=!1,t.chart.hasDraggedAnnotation=!0,t.removeDrag=e(u,n?"touchmove":"mousemove",(function(a){t.hasDragged=!0,(a=o.normalize(a)).prevChartX=g,a.prevChartY=h,r(t,"drag",a),g=a.chartX,h=a.chartY}),n?{passive:!1}:void 0),t.removeMouseUp=e(u,n?"touchend":"mouseup",(function(a){var o=b(t.target&&t.target.annotation,t.target);o&&(o.cancelClick=t.hasDragged),t.cancelClick=t.hasDragged,t.hasDragged=!1,t.chart.hasDraggedAnnotation=!1,r(b(o,t),"afterUpdate"),t.onMouseUp(a)}),n?{passive:!1}:void 0)}},t.prototype.onMouseUp=function(a){var t=this.chart;a=this.target||this;var b=t.options.annotations;t=t.annotations.indexOf(a),this.removeDocEvents(),b[t]=a.options},t.prototype.removeDocEvents=function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},t}()})),o(t,"Extensions/Annotations/ControlPoint.js",[t["Extensions/Annotations/EventEmitter.js"],t["Core/Utilities.js"]],(function(t,o){var n,u=this&&this.__extends||(n=function(a,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var b in t)t.hasOwnProperty(b)&&(a[b]=t[b])},n(a,b)},function(a,b){function t(){this.constructor=a}n(a,b),a.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),e=o.merge,r=o.pick;return t=function(t){function a(a,o,n,g){var b=t.call(this)||this;return b.graphic=void 0,b.nonDOMEvents=["drag"],b.chart=a,b.target=o,b.options=n,b.index=r(n.index,g),b}return u(a,t),a.prototype.destroy=function(){t.prototype.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.options=this.target=this.chart=null},a.prototype.redraw=function(a){this.graphic[a?"animate":"attr"](this.options.positioner.call(this,this.target))},a.prototype.render=function(){var a=this.chart,t=this.options;this.graphic=a.renderer.symbol(t.symbol,0,0,t.width,t.height).add(a.controlPointsGroup).css(t.style),this.setVisibility(t.visible),this.addEvents()},a.prototype.setVisibility=function(a){this.graphic[a?"show":"hide"](),this.options.visible=a},a.prototype.update=function(a){var b=this.chart,t=this.target,g=this.index;a=e(!0,this.options,a),this.destroy(),this.constructor(b,t,a,g),this.render(b.controlPointsGroup),this.redraw()},a}(t),t})),o(t,"Extensions/Annotations/MockPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],(function(t,o){var u=t.series.prototype,n=o.defined,e=o.fireEvent;return t=function(){function t(a,b,t){this.plotY=this.plotX=void 0,this.mock=!0,this.series={visible:!0,chart:a,getPlotBox:u.getPlotBox},this.target=b||null,this.options=t,this.applyOptions(this.getOptions())}return t.fromPoint=function(a){return new t(a.series.chart,null,{x:a.x,y:a.y,xAxis:a.series.xAxis,yAxis:a.series.yAxis})},t.pointToPixels=function(a,b){var t=a.series,o=t.chart,g=a.plotX||0,n=a.plotY||0;return o.inverted&&(a.mock?(g=a.plotY,n=a.plotX):(g=o.plotWidth-(a.plotY||0),n=o.plotHeight-(a.plotX||0))),t&&!b&&(g+=(a=t.getPlotBox()).translateX,n+=a.translateY),{x:g,y:n}},t.pointToOptions=function(a){return{x:a.x,y:a.y,xAxis:a.series.xAxis,yAxis:a.series.yAxis}},t.prototype.applyOptions=function(a){this.command=a.command,this.setAxis(a,"x"),this.setAxis(a,"y"),this.refresh()},t.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},t.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},t.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},t.prototype.isInsidePlot=function(){var a=this.plotX,b=this.plotY,t=this.series.xAxis,o=this.series.yAxis,g={x:a,y:b,isInsidePlot:!0};return t&&(g.isInsidePlot=n(a)&&0<=a&&a<=t.len),o&&(g.isInsidePlot=g.isInsidePlot&&n(b)&&0<=b&&b<=o.len),e(this.series.chart,"afterIsInsidePlot",g),g.isInsidePlot},t.prototype.refresh=function(){var a=this.series,b=a.xAxis;a=a.yAxis;var t=this.getOptions();b?(this.x=t.x,this.plotX=b.toPixels(t.x,!0)):(this.x=void 0,this.plotX=t.x),a?(this.y=t.y,this.plotY=a.toPixels(t.y,!0)):(this.y=null,this.plotY=t.y),this.isInside=this.isInsidePlot()},t.prototype.refreshOptions=function(){var a=this.series,b=a.xAxis;a=a.yAxis,this.x=this.options.x=b?this.options.x=b.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=a?a.toValue(this.plotY,!0):this.plotY},t.prototype.rotate=function(a,b,t){if(!this.hasDynamicOptions()){var o=Math.cos(t);t=Math.sin(t);var g=this.plotX-a,n=this.plotY-b;this.plotX=g*o-n*t+a,this.plotY=g*t+n*o+b,this.refreshOptions()}},t.prototype.scale=function(a,b,t,o){if(!this.hasDynamicOptions()){var g=this.plotY*o;this.plotX=(1-t)*a+this.plotX*t,this.plotY=(1-o)*b+g,this.refreshOptions()}},t.prototype.setAxis=function(a,b){a=a[b+="Axis"];var t=this.series.chart;this.series[b]="object"==typeof a?a:n(a)?t[b][a]||t.get(a):null},t.prototype.toAnchor=function(){var a=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(a[0]=this.plotY,a[1]=this.plotX),a},t.prototype.translate=function(a,b,t,o){this.hasDynamicOptions()||(this.plotX+=t,this.plotY+=o,this.refreshOptions())},t}()})),o(t,"Extensions/Annotations/Controllables/Controllable.js",[t["Extensions/Annotations/ControlPoint.js"],t["Extensions/Annotations/MockPoint.js"],t["Core/Tooltip.js"],t["Core/Utilities.js"]],(function(t,o,q,n){var e=n.isObject,r=n.isString,a=n.merge,b=n.splat;return n=function(){function n(a,b,t,o){this.graphic=void 0,this.annotation=a,this.chart=a.chart,this.collection="label"===o?"labels":"shapes",this.options=b,this.points=[],this.controlPoints=[],this.index=t,this.itemType=o,this.init(a,b,t)}return n.prototype.addControlPoints=function(){var o=this,b=this.controlPoints,n=this.options.controlPoints||[];n.forEach((function(e,g){(e=a(o.options.controlPointOptions,e)).index||(e.index=g),n[g]=e,b.push(new t(o.chart,o,e))}))},n.prototype.anchor=function(t){var b=t.series.getPlotBox(),o=t.series.chart,n=t.mock?t.toAnchor():q.prototype.getAnchor.call({chart:t.series.chart},t);return{relativePosition:n={x:n[0]+(this.options.x||0),y:n[1]+(this.options.y||0),height:n[2]||0,width:n[3]||0},absolutePosition:a(n,{x:n.x+(t.mock?b.translateX:o.plotLeft),y:n.y+(t.mock?b.translateY:o.plotTop)})}},n.prototype.attr=function(){for(var a=0;a<arguments.length;a++);this.graphic.attr.apply(this.graphic,arguments)},n.prototype.attrsFromOptions=function(a){var t,o=this.constructor.attrsMap,b={},n=this.chart.styledMode;for(t in a){var e=o[t];void 0===o[t]||n&&-1!==["fill","stroke","stroke-width"].indexOf(e)||(b[e]=a[t])}return b},n.prototype.destroy=function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach((function(a){return a.destroy()})),this.options=this.controlPoints=this.points=this.chart=null,this.annotation&&(this.annotation=null)},n.prototype.getPointsOptions=function(){var a=this.options;return a.points||a.point&&b(a.point)},n.prototype.init=function(a,b,t){this.annotation=a,this.chart=a.chart,this.options=b,this.points=[],this.controlPoints=[],this.index=t,this.linkPoints(),this.addControlPoints()},n.prototype.linkPoints=function(){var t,a=this.getPointsOptions(),b=this.points,o=a&&a.length||0;for(t=0;t<o;t++){var n=this.point(a[t],b[t]);if(!n)return void(b.length=0);n.mock&&n.refresh(),b[t]=n}return b},n.prototype.point=function(a,b){return a&&a.series?a:(b&&null!==b.series||(e(a)?b=new o(this.chart,this,a):r(a)?b=this.chart.get(a)||null:"function"==typeof a&&(b=(b=a.call(b,this)).series?b:new o(this.chart,this,a))),b)},n.prototype.render=function(a){this.controlPoints.forEach((function(a){return a.render()}))},n.prototype.redraw=function(a){this.controlPoints.forEach((function(t){return t.redraw(a)}))},n.prototype.rotate=function(a,b,t){this.transform("rotate",a,b,t)},n.prototype.scale=function(a,b,t,o){this.transform("scale",a,b,t,o)},n.prototype.setControlPointsVisibility=function(a){this.controlPoints.forEach((function(b){b.setVisibility(a)}))},n.prototype.shouldBeDrawn=function(){return!!this.points.length},n.prototype.transform=function(a,b,t,o,n){var e=this;if(this.chart.inverted){var r=b;b=t,t=r}this.points.forEach((function(r,g){return e.transformPoint(a,b,t,o,n,g)}),this)},n.prototype.transformPoint=function(a,b,t,n,e,r){var h=this.points[r];h.mock||(h=this.points[r]=o.fromPoint(h)),h[a](b,t,n,e)},n.prototype.translate=function(a,b){this.transform("translate",null,null,a,b)},n.prototype.translatePoint=function(a,b,t){this.transformPoint("translate",null,null,a,b,t)},n.prototype.translateShape=function(a,b,t){var o=this.annotation.chart,n=this.annotation.userOptions,e=o.annotations.indexOf(this.annotation);o=o.options.annotations[e],this.translatePoint(a,b,0),t&&this.translatePoint(a,b,1),o[this.collection][this.index].point=this.options.point,n[this.collection][this.index].point=this.options.point},n.prototype.update=function(b){var t=this.annotation;b=a(!0,this.options,b);var o=this.graphic.parentGroup;this.destroy(),this.constructor(t,b,this.index,this.itemType),this.render(o),this.redraw()},n}(),n})),o(t,"Extensions/Annotations/Controllables/ControllableDefaults.js",[],(function(){return{defaultMarkers:{arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}}}})),o(t,"Extensions/Annotations/Controllables/ControllablePath.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllableDefaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],(function(t,o,q,n){function e(a){return function(b){this.attr(a,"url(#"+b+")")}}function r(){this.options.defs=d(h,this.options.defs||{})}function a(a,b){var t={attributes:{id:a}},o={stroke:b.color||"none",fill:b.color||"rgba(0, 0, 0, 0.75)"};return t.children=b.children&&b.children.map((function(a){return d(o,a)})),b=d(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},b,t),(b=this.definition(b)).id=a,b}var b=this&&this.__extends||function(){var a=function(b,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},a(b,t)};return function(b,t){function o(){this.constructor=b}a(b,t),b.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),h=o.defaultMarkers,l=n.addEvent,g=n.defined,c=n.extend,d=n.merge,f=n.uniqueKey,v=[],y=e("marker-end"),p=e("marker-start"),x="rgba(192,192,192,"+(q.svg?1e-4:.002)+")";return function(t){function o(a,b,o){return(a=t.call(this,a,b,o,"shape")||this).type="path",a}return b(o,t),o.compose=function(b,t){-1===v.indexOf(b)&&(v.push(b),l(b,"afterGetContainer",r)),-1===v.indexOf(t)&&(v.push(t),t.prototype.addMarker=a)},o.prototype.toD=function(){var a=this.options.d;if(a)return"function"==typeof a?a.call(this):a;var b=(a=this.points).length,t=[],o=b,n=a[0],e=o&&this.anchor(n).absolutePosition,r=0;if(e)for(t.push(["M",e.x,e.y]);++r<b&&o;)o=(n=a[r]).command||"L",e=this.anchor(n).absolutePosition,"M"===o||"L"===o?t.push([o,e.x,e.y]):"Z"===o&&t.push([o]),o=n.series.visible;return o&&this.graphic?this.chart.renderer.crispLine(t,this.graphic.strokeWidth()):null},o.prototype.shouldBeDrawn=function(){return t.prototype.shouldBeDrawn.call(this)||!!this.options.d},o.prototype.render=function(a){var b=this.options,o=this.attrsFromOptions(b);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(o).add(a),b.className&&this.graphic.addClass(b.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(a),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:x,fill:x,"stroke-width":this.graphic.strokeWidth()+2*b.snap}),t.prototype.render.call(this),c(this.graphic,{markerStartSetter:p,markerEndSetter:y}),this.setMarkers(this)},o.prototype.redraw=function(a){if(this.graphic){var b=this.toD(),o=a?"animate":"attr";b?(this.graphic[o]({d:b}),this.tracker[o]({d:b})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=!!b}t.prototype.redraw.call(this,a)},o.prototype.setMarkers=function(a){var b=a.options,t=a.chart,o=t.options.defs,n=b.fill,e=g(n)&&"none"!==n?n:b.stroke;["markerStart","markerEnd"].forEach((function(n){var g,r=b[n];if(r){for(g in o){var h=o[g];if((r===(h.attributes&&h.attributes.id)||r===h.id)&&"marker"===h.tagName){var p=h;break}}p&&(r=a[n]=t.renderer.addMarker((b.id||f())+"-"+r,d(p,{color:e})),a.attr(n,r.getAttribute("id")))}}))},o.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},o}(t)})),o(t,"Extensions/Annotations/Controllables/ControllableRect.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],(function(t,o,q){var n,e=this&&this.__extends||(n=function(a,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},n(a,b)},function(a,b){function t(){this.constructor=a}n(a,b),a.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),r=q.merge;return function(t){function a(a,o,n){return(a=t.call(this,a,o,n,"shape")||this).type="rect",a.translate=t.prototype.translateShape,a}return e(a,t),a.prototype.render=function(a){var b=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(b).add(a),t.prototype.render.call(this)},a.prototype.redraw=function(a){if(this.graphic){var b=this.anchor(this.points[0]).absolutePosition;b?this.graphic[a?"animate":"attr"]({x:b.x,y:b.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=!!b}t.prototype.redraw.call(this,a)},a.attrsMap=r(o.attrsMap,{width:"width",height:"height"}),a}(t)})),o(t,"Extensions/Annotations/Controllables/ControllableCircle.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],(function(t,o,q){var n,e=this&&this.__extends||(n=function(a,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},n(a,b)},function(a,b){function t(){this.constructor=a}n(a,b),a.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),r=q.merge;return function(t){function a(a,o,n){return(a=t.call(this,a,o,n,"shape")||this).type="circle",a.translate=t.prototype.translateShape,a}return e(a,t),a.prototype.redraw=function(a){if(this.graphic){var b=this.anchor(this.points[0]).absolutePosition;b?this.graphic[a?"animate":"attr"]({x:b.x,y:b.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!b}t.prototype.redraw.call(this,a)},a.prototype.render=function(a){var b=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(b).add(a),t.prototype.render.call(this)},a.prototype.setRadius=function(a){this.options.r=a},a.attrsMap=r(o.attrsMap,{r:"r"}),a}(t)})),o(t,"Extensions/Annotations/Controllables/ControllableEllipse.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],(function(t,o,q){var a,n=this&&this.__extends||(a=function(b,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},a(b,t)},function(b,t){function o(){this.constructor=b}a(b,t),b.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),e=q.merge,r=q.defined;return function(a){function b(b,t,o){return(b=a.call(this,b,t,o,"shape")||this).type="ellipse",b}return n(b,a),b.prototype.init=function(b,t,o){r(t.yAxis)&&t.points.forEach((function(a){a.yAxis=t.yAxis})),r(t.xAxis)&&t.points.forEach((function(a){a.xAxis=t.xAxis})),a.prototype.init.call(this,b,t,o)},b.prototype.render=function(b){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(b),a.prototype.render.call(this)},b.prototype.translate=function(b,t){a.prototype.translateShape.call(this,b,t,!0)},b.prototype.getDistanceFromLine=function(a,b,t,o){return Math.abs((b.y-a.y)*t-(b.x-a.x)*o+b.x*a.y-b.y*a.x)/Math.sqrt((b.y-a.y)*(b.y-a.y)+(b.x-a.x)*(b.x-a.x))},b.prototype.getAttrs=function(a,b){var t=a.x,o=a.y,n=b.x,e=b.y;b=(t+n)/2,a=(o+e)/2;var r=Math.sqrt((t-n)*(t-n)/4+(o-e)*(o-e)/4);return o=180*Math.atan((e-o)/(n-t))/Math.PI,b<t&&(o+=180),{cx:b,cy:a,rx:r,ry:t=this.getRY(),angle:o}},b.prototype.getRY=function(){var a=this.getYAxis();return r(a)?Math.abs(a.toPixels(this.options.ry)-a.toPixels(0)):this.options.ry},b.prototype.getYAxis=function(){return this.chart.yAxis[this.options.yAxis]},b.prototype.getAbsolutePosition=function(a){return this.anchor(a).absolutePosition},b.prototype.redraw=function(b){if(this.graphic){var t=this.getAbsolutePosition(this.points[0]),o=this.getAbsolutePosition(this.points[1]);o=this.getAttrs(t,o),t?this.graphic[b?"animate":"attr"]({cx:o.cx,cy:o.cy,rx:o.rx,ry:o.ry,rotation:o.angle,rotationOriginX:o.cx,rotationOriginY:o.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!t}a.prototype.redraw.call(this,b)},b.prototype.setYRadius=function(a){var b=this.annotation.userOptions.shapes;this.options.ry=a,b&&b[0]&&(b[0].ry=a,b[0].ry=a)},b.attrsMap=e(o.attrsMap,{ry:"ry"}),b}(t)})),o(t,"Extensions/Annotations/Controllables/ControllableLabel.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Core/FormatUtilities.js"],t["Extensions/Annotations/MockPoint.js"],t["Core/Tooltip.js"],t["Core/Utilities.js"]],(function(t,o,q,n,e){function r(a,b,t,o,n){var e=n&&n.anchorX;n=n&&n.anchorY;var p=t/2;if(l(e)&&l(n)){var r=[["M",e,n]],g=b-n;0>g&&(g=-o-g),g<t&&(p=e<a+t/2?g:t-g),n>b+o?r.push(["L",a+p,b+o]):n<b?r.push(["L",a+p,b]):e<a?r.push(["L",a,b+o/2]):e>a+t&&r.push(["L",a+t,b+o/2])}return r||[]}var a=this&&this.__extends||function(){var a=function(b,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},a(b,t)};return function(b,t){function o(){this.constructor=b}a(b,t),b.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),b=o.format,h=e.extend,l=e.isNumber,g=e.pick,u=[];return function(t){function o(a,b,o){return t.call(this,a,b,o,"label")||this}return a(o,t),o.alignedPosition=function(a,b){var t,g,o=a.align,n=a.verticalAlign,e=(b.x||0)+(a.x||0),r=(b.y||0)+(a.y||0);return"right"===o?t=1:"center"===o&&(t=2),t&&(e+=(b.width-(a.width||0))/t),"bottom"===n?g=1:"middle"===n&&(g=2),g&&(r+=(b.height-(a.height||0))/g),{x:Math.round(e),y:Math.round(r)}},o.compose=function(a){-1===u.indexOf(a)&&(u.push(a),a.prototype.symbols.connector=r)},o.justifiedOptions=function(a,b,t,o){var n=t.align,e=t.verticalAlign,r=b.box?0:b.padding||0,g=b.getBBox();b={align:n,verticalAlign:e,x:t.x,y:t.y,width:b.width,height:b.height},t=(o.x||0)-a.plotLeft,o=(o.y||0)-a.plotTop;var p=t+r;return 0>p&&("right"===n?b.align="left":b.x=(b.x||0)-p),(p=t+g.width-r)>a.plotWidth&&("left"===n?b.align="right":b.x=(b.x||0)+a.plotWidth-p),0>(p=o+r)&&("bottom"===e?b.verticalAlign="top":b.y=(b.y||0)-p),(p=o+g.height-r)>a.plotHeight&&("top"===e?b.verticalAlign="bottom":b.y=(b.y||0)+a.plotHeight-p),b},o.prototype.translatePoint=function(a,b){t.prototype.translatePoint.call(this,a,b,0)},o.prototype.translate=function(a,b){var t=this.annotation.chart,o=this.annotation.userOptions,n=t.annotations.indexOf(this.annotation);n=t.options.annotations[n],t.inverted&&(t=a,a=b,b=t),this.options.x+=a,this.options.y+=b,n[this.collection][this.index].x=this.options.x,n[this.collection][this.index].y=this.options.y,o[this.collection][this.index].x=this.options.x,o[this.collection][this.index].y=this.options.y},o.prototype.render=function(a){var b=this.options,n=this.attrsFromOptions(b),e=b.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,b.shape,null,null,b.useHTML,null,"annotation-label").attr(n).add(a),this.annotation.chart.styledMode||("contrast"===e.color&&(e.color=this.annotation.chart.renderer.getContrast(-1<o.shapesWithoutBackground.indexOf(b.shape)?"#FFFFFF":b.backgroundColor)),this.graphic.css(b.style).shadow(b.shadow)),b.className&&this.graphic.addClass(b.className),this.graphic.labelrank=b.labelrank,t.prototype.render.call(this)},o.prototype.redraw=function(a){var o=this.options,n=this.text||o.format||o.text,e=this.graphic,g=this.points[0];e?(e.attr({text:n?b(String(n),g.getLabelConfig(),this.annotation.chart):o.formatter.call(g,this)}),o=this.anchor(g),(n=this.position(o))?(e.alignAttr=n,n.anchorX=o.absolutePosition.x,n.anchorY=o.absolutePosition.y,e[a?"animate":"attr"](n)):e.attr({x:0,y:-9999}),e.placed=!!n,t.prototype.redraw.call(this,a)):this.redraw(a)},o.prototype.anchor=function(a){var b=t.prototype.anchor.apply(this,arguments),o=this.options.x||0,n=this.options.y||0;return b.absolutePosition.x-=o,b.absolutePosition.y-=n,b.relativePosition.x-=o,b.relativePosition.y-=n,b},o.prototype.position=function(a){var b=this.graphic,t=this.annotation.chart,e=this.points[0],r=this.options,l=a.absolutePosition,c=a.relativePosition,u=e.series.visible&&q.prototype.isInsidePlot.call(e);if(b&&u){var d=b.width;a=void 0===d?0:d;var f=void 0===(d=b.height)?0:d;r.distance?d=n.prototype.getPosition.call({chart:t,distance:g(r.distance,16)},a,f,{plotX:c.x,plotY:c.y,negative:e.negative,ttBelow:e.ttBelow,h:c.height||c.width}):r.positioner?d=r.positioner.call(this):(e={x:l.x,y:l.y,width:0,height:0},d=o.alignedPosition(h(r,{width:a,height:f}),e),"justify"===this.options.overflow&&(d=o.alignedPosition(o.justifiedOptions(t,b,r,d),e))),r.crop&&(b=d.x-t.plotLeft,r=d.y-t.plotTop,u=t.isInsidePlot(b,r)&&t.isInsidePlot(b+a,r+f))}return u?d:null},o.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},o.shapesWithoutBackground=["connector"],o}(t)})),o(t,"Extensions/Annotations/Controllables/ControllableImage.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllableLabel.js"]],(function(t,o){var u=this&&this.__extends||function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])})(o,n)};return function(o,n){function a(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();return function(t){function n(o,a,b){return(o=t.call(this,o,a,b,"shape")||this).type="image",o.translate=t.prototype.translateShape,o}return u(n,t),n.prototype.render=function(o){var a=this.attrsFromOptions(this.options),b=this.options;this.graphic=this.annotation.chart.renderer.image(b.src,0,-9e9,b.width,b.height).attr(a).add(o),this.graphic.width=b.width,this.graphic.height=b.height,t.prototype.render.call(this)},n.prototype.redraw=function(n){if(this.graphic){var a=this.anchor(this.points[0]);(a=o.prototype.position.call(this,a))?this.graphic[n?"animate":"attr"]({x:a.x,y:a.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!a}t.prototype.redraw.call(this,n)},n.attrsMap={width:"width",height:"height",zIndex:"zIndex"},n}(t)})),o(t,"Core/Chart/ChartNavigationComposition.js",[],(function(){var t;return function(t){t.compose=function(t){return t.navigation||(t.navigation=new o(t)),t};var o=function(){function t(t){this.updates=[],this.chart=t}return t.prototype.addUpdate=function(t){this.chart.navigation.updates.push(t)},t.prototype.update=function(t,o){var a=this;this.updates.forEach((function(b){b.call(a.chart,t,o)}))},t}();t.Additions=o}(t||(t={})),t})),o(t,"Extensions/Annotations/NavigationBindingsUtilities.js",[t["Core/Utilities.js"]],(function(t){var o=t.defined,q=t.isNumber,n=t.pick,e={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:e,getAssignedAxis:function(t){return t.filter((function(a){var b=a.axis.getExtremes(),t=b.min;b=b.max;var o=n(a.axis.minPointOffset,0);return q(t)&&q(b)&&a.value>=t-o&&a.value<=b+o&&!a.axis.options.isInternal}))[0]},getFieldType:function(t,a){return a=typeof a,o(t=e[t])&&(a=t),{string:"text",number:"number",boolean:"checkbox"}[a]}}})),o(t,"Extensions/Annotations/NavigationBindingsDefaults.js",[t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Utilities.js"]],(function(t,o){var q=t.getAssignedAxis,n=o.isNumber,e=o.merge;return{lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var a=this.chart.pointer.getCoordinates(t);t=q(a.xAxis),a=q(a.yAxis);var b=this.chart.options.navigation;if(t&&a)return this.chart.addAnnotation(e({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:t.value,y:a.value,xAxis:t.axis.options.index,yAxis:a.axis.options.index},r:5}]},b.annotationsOptions,b.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,a){var b=a.options.shapes;if(b=b&&b[0]&&b[0].point||{},n(b.xAxis)&&n(b.yAxis)){var o=this.chart.inverted,e=this.chart.xAxis[b.xAxis].toPixels(b.x);b=this.chart.yAxis[b.yAxis].toPixels(b.y),o=Math.max(Math.sqrt(Math.pow(o?b-t.chartX:e-t.chartX,2)+Math.pow(o?e-t.chartY:b-t.chartY,2)),5)}a.update({shapes:[{r:o}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var a=this.chart.pointer.getCoordinates(t);t=q(a.xAxis),a=q(a.yAxis);var b=this.chart.options.navigation;if(t&&a)return this.chart.addAnnotation(e({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:t.axis.options.index,yAxis:a.axis.options.index,points:[{x:t.value,y:a.value},{x:t.value,y:a.value}],ry:1}]},b.annotationsOptions,b.bindings.ellipseAnnotation.annotationOptions))},steps:[function(t,a){var b=(a=a.shapes[0]).getAbsolutePosition(a.points[1]);a.translatePoint(t.chartX-b.x,t.chartY-b.y,1),a.redraw(!1)},function(t,a){var b=(a=a.shapes[0]).getAbsolutePosition(a.points[0]),o=a.getAbsolutePosition(a.points[1]);t=a.getDistanceFromLine(b,o,t.chartX,t.chartY),b=a.getYAxis(),t=Math.abs(b.toValue(0)-b.toValue(t)),a.setYRadius(t),a.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){t=this.chart.pointer.getCoordinates(t);var a=q(t.xAxis),b=q(t.yAxis);if(a&&b){t=a.value;var o=b.value;a=a.axis.options.index,b=b.axis.options.index;var n=this.chart.options.navigation;return this.chart.addAnnotation(e({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:a,yAxis:b,x:t,y:o},{xAxis:a,yAxis:b,x:t,y:o},{xAxis:a,yAxis:b,x:t,y:o},{xAxis:a,yAxis:b,x:t,y:o},{command:"Z"}]}]},n.annotationsOptions,n.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(t,a){var b=a.options.shapes;b=b&&b[0]&&b[0].points||[];var o=this.chart.pointer.getCoordinates(t);t=q(o.xAxis),o=q(o.yAxis),t&&o&&(t=t.value,o=o.value,b[1].x=t,b[2].x=t,b[2].y=o,b[3].y=o,a.update({shapes:[{points:b}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var a=this.chart.pointer.getCoordinates(t);t=q(a.xAxis),a=q(a.yAxis);var b=this.chart.options.navigation;if(t&&a)return this.chart.addAnnotation(e({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:t.axis.options.index,yAxis:a.axis.options.index,x:t.value,y:a.value},overflow:"none",crop:!0}]},b.annotationsOptions,b.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}})),o(t,"Extensions/Annotations/NavigationBindings.js",[t["Core/Chart/ChartNavigationComposition.js"],t["Core/DefaultOptions.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Extensions/Annotations/NavigationBindingsDefaults.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Utilities.js"]],(function(t,o,q,n,e,r,a){function h(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}function l(){this.navigationBindings&&this.navigationBindings.destroy()}function g(){var a=this.options;a&&a.navigation&&a.navigation.bindings&&(this.navigationBindings=new T(this,a.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function u(){var a=this.navigationBindings;if(this&&a){var b=!1;if(this.series.forEach((function(a){!a.options.isInternal&&a.visible&&(b=!0)})),this.navigationBindings&&this.navigationBindings.container&&this.navigationBindings.container[0]){var t=this.navigationBindings.container[0];N(a.boundClassNames,(function(a,o){if(o=t.querySelectorAll("."+o))for(var n=0;n<o.length;n++){var e=o[n],r=e.className;"normal"===a.noDataState||b?-1!==r.indexOf("highcharts-disabled-btn")&&e.classList.remove("highcharts-disabled-btn"):-1===r.indexOf("highcharts-disabled-btn")&&(e.className+=" highcharts-disabled-btn")}}))}}}function c(){this.deselectAnnotation()}function d(){this.selectedButtonElement=null}function f(a){var b=a.prototype.defaultOptions.events&&a.prototype.defaultOptions.events.click;j(!0,a.prototype.defaultOptions.events,{click:function(a){var t=this,o=t.chart.navigationBindings,n=o.activeAnnotation;b&&b.call(t,a),n!==t?(o.deselectAnnotation(),o.activeAnnotation=t,t.setControlPointsVisibility(!0),E(o,"showPopup",{annotation:t,formType:"annotation-toolbar",options:o.annotationToFields(t),onSubmit:function(a){if("remove"===a.actionType)o.activeAnnotation=!1,o.chart.removeAnnotation(t);else{var b={};o.fieldsToOptions(a.fields,b),o.deselectAnnotation(),a=b.typeOptions,"measure"===t.options.type&&(a.crosshairY.enabled=0!==a.crosshairY.strokeWidth,a.crosshairX.enabled=0!==a.crosshairX.strokeWidth),t.update(b)}}})):E(o,"closePopup"),a.activeAnnotation=!0}})}var v=o.setOptions,p=q.format,y=n.doc,x=n.win,m=r.getFieldType,A=a.addEvent,C=a.attr,E=a.fireEvent,k=a.isArray,P=a.isFunction,w=a.isNumber,O=a.isObject,j=a.merge,N=a.objectEach,B=a.pick,M=[],T=function(){function a(a,b){this.selectedButton=this.boundClassNames=void 0,this.chart=a,this.options=b,this.eventsToUnbind=[],this.container=this.chart.container.querySelectorAll("."+this.options.bindingsClassName),this.container.length||(this.container=y.querySelectorAll("."+this.options.bindingsClassName))}return a.compose=function(b,t){-1===M.indexOf(b)&&(M.push(b),A(b,"remove",h),f(b),N(b.types,(function(a){f(a)}))),-1===M.indexOf(t)&&(M.push(t),A(t,"destroy",l),A(t,"load",g),A(t,"render",u)),-1===M.indexOf(a)&&(M.push(a),A(a,"closePopup",c),A(a,"deselectButton",d)),-1===M.indexOf(v)&&(M.push(v),v(e))},a.prototype.initEvents=function(){var a=this,b=a.chart,t=a.container,o=a.options;a.boundClassNames={},N(o.bindings||{},(function(b){a.boundClassNames[b.className]=b})),[].forEach.call(t,(function(b){a.eventsToUnbind.push(A(b,"click",(function(t){var o=a.getButtonEvents(b,t);o&&-1===o.button.className.indexOf("highcharts-disabled-btn")&&a.bindingsButtonClick(o.button,o.events,t)})))})),N(o.events||{},(function(b,t){P(b)&&a.eventsToUnbind.push(A(a,t,b,{passive:!1}))})),a.eventsToUnbind.push(A(b.container,"click",(function(t){!b.cancelClick&&b.isInsidePlot(t.chartX-b.plotLeft,t.chartY-b.plotTop,{visiblePlotOnly:!0})&&a.bindingsChartClick(this,t)}))),a.eventsToUnbind.push(A(b.container,n.isTouchDevice?"touchmove":"mousemove",(function(b){a.bindingsContainerMouseMove(this,b)}),n.isTouchDevice?{passive:!1}:void 0))},a.prototype.initUpdate=function(){var a=this;t.compose(this.chart).navigation.addUpdate((function(b){a.update(b)}))},a.prototype.bindingsButtonClick=function(a,b,t){var o=this.chart,n=o.renderer.boxWrapper,e=!0;this.selectedButtonElement&&(this.selectedButtonElement.classList===a.classList&&(e=!1),E(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&"annotations"===this.currentUserDetails.coll&&o.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1)),e?(this.selectedButton=b,this.selectedButtonElement=a,E(this,"selectButton",{button:a}),b.init&&b.init.call(this,a,t),(b.start||b.steps)&&o.renderer.boxWrapper.addClass("highcharts-draw-mode")):(o.stockTools&&o.stockTools.toggleButtonActiveClass(a),n.removeClass("highcharts-draw-mode"),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null)},a.prototype.bindingsChartClick=function(a,t){a=this.chart;var o=this.activeAnnotation,n=this.selectedButton;a=a.renderer.boxWrapper,o&&(o.cancelClick||t.activeAnnotation||!t.target.parentNode||function(a,b){var t=x.Element.prototype,o=t.matches||t.msMatchesSelector||t.webkitMatchesSelector,n=null;if(t.closest)n=t.closest.call(a,b);else do{if(o.call(a,b))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType);return n}(t.target,".highcharts-popup")?o.cancelClick&&setTimeout((function(){o.cancelClick=!1}),0):E(this,"closePopup")),n&&n.start&&(this.nextEvent?(this.nextEvent(t,this.currentUserDetails),this.steps&&(this.stepIndex++,n.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=n.steps[this.stepIndex]:(E(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),n.end&&n.end.call(this,t,this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null))):(this.currentUserDetails=n.start.call(this,t))&&n.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=this.nextEvent=n.steps[this.stepIndex]):(E(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,n.end&&n.end.call(this,t,this.currentUserDetails)))},a.prototype.bindingsContainerMouseMove=function(a,b){this.mouseMoveEvent&&this.mouseMoveEvent(b,this.currentUserDetails)},a.prototype.fieldsToOptions=function(a,b){return N(a,(function(a,t){var o=parseFloat(a),n=t.split("."),e=n.length-1;if(!w(o)||a.match(/px/g)||t.match(/format/g)||(a=o),"undefined"!==a){var r=b;n.forEach((function(b,t){var o=B(n[t+1],"");e===t?r[b]=a:(r[b]||(r[b]=o.match(/\d/g)?[]:{}),r=r[b])}))}})),b},a.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},a.prototype.annotationToFields=function(b){function t(a,o,n,r,h){if(n&&a&&-1===g.indexOf(o)&&(0<=(n.indexOf&&n.indexOf(o))||n[o]||!0===n))if(k(a))r[o]=[],a.forEach((function(a,b){O(a)?(r[o][b]={},N(a,(function(a,n){t(a,n,e[o],r[o][b],o)}))):t(a,0,e[o],r[o],o)}));else if(O(a)){var l={};k(r)?(r.push(l),l[o]={},l=l[o]):r[o]=l,N(a,(function(a,b){t(a,b,0===o?n:e[o],l,o)}))}else"format"===o?r[o]=[p(a,b.labels[0].points[0]).toString(),"text"]:k(r)?r.push([a,m(h,a)]):r[o]=[a,m(o,a)]}var o=b.options,n=a.annotationsEditable,e=n.nestedOptions,r=B(o.type,o.shapes&&o.shapes[0]&&o.shapes[0].type,o.labels&&o.labels[0]&&o.labels[0].type,"label"),g=a.annotationsNonEditable[o.langKey]||[],h={langKey:o.langKey,type:r};return N(o,(function(a,b){"typeOptions"===b?(h[b]={},N(o[b],(function(a,o){t(a,o,e,h[b],o)}))):t(a,b,n[r],h,b)})),h},a.prototype.getClickedClassNames=function(a,b){var t,o=b.target;for(b=[];o&&((t=C(o,"class"))&&(b=b.concat(t.split(" ").map((function(a){return[a,o]})))),(o=o.parentNode)!==a););return b},a.prototype.getButtonEvents=function(a,b){var t,o=this;return this.getClickedClassNames(a,b).forEach((function(a){o.boundClassNames[a[0]]&&!t&&(t={events:o.boundClassNames[a[0]],button:a[1]})})),t},a.prototype.update=function(a){this.options=j(!0,this.options,a),this.removeEvents(),this.initEvents()},a.prototype.removeEvents=function(){this.eventsToUnbind.forEach((function(a){return a()}))},a.prototype.destroy=function(){this.removeEvents()},a.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},a.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]},a}();return T})),o(t,"Extensions/Annotations/Popup/PopupAnnotations.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],(function(t,o){function q(t,o,l,c,d,p){var f=this;if(o){var v,y,x=this.addInput,u=this.lang;h(c,(function(n,e){v=""!==l?l+"."+e:e,b(n)&&(!a(n)||a(n)&&b(n[0])?((y=u[e]||e).match(/\d/g)||d.push([!0,y,t]),q.call(f,t,o,v,n,d,!1)):d.push([f,v,"annotation",t,n]))})),p&&(g(d,(function(a){return a[1].match(/format/g)?-1:1})),e&&d.reverse(),d.forEach((function(a){!0===a[0]?r("span",{className:"highcharts-annotation-title"},void 0,a[2]).appendChild(n.createTextNode(a[1])):(a[4]={value:a[4][0],type:a[4][1]},x.apply(a[0],a.splice(1)))})))}}var n=t.doc,e=t.isFirefox,r=o.createElement,a=o.isArray,b=o.isObject,h=o.objectEach,l=o.pick,g=o.stableSort;return{addForm:function(a,b,t,o){if(a){var e=this.container,g=this.lang,h=r("h2",{className:"highcharts-popup-main-title"},void 0,e);h.appendChild(n.createTextNode(g[b.langKey]||b.langKey||"")),h=r("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,e);var l=r("div",{className:"highcharts-popup-bottom-row"},void 0,e);q.call(this,h,a,"",b,[],!0),this.addButton(l,o?g.addButton||"add":g.saveButton||"save",o?"add":"save",e,t)}},addToolbar:function(a,b,t){var o=this,g=this.lang,e=this.container,h=this.showForm;-1===e.className.indexOf("highcharts-annotation-toolbar")&&(e.className+=" highcharts-annotation-toolbar"),a&&(e.style.top=a.plotTop+10+"px"),r("span",void 0,void 0,e).appendChild(n.createTextNode(l(g[b.langKey]||b.langKey,b.shapes&&b.shapes[0].type,"")));var c=this.addButton(e,g.removeButton||"remove","remove",e,t);c.className+=" highcharts-annotation-remove-button",c.style["background-image"]="url("+this.iconsURL+"destroy.svg)",(c=this.addButton(e,g.editButton||"edit","edit",e,(function(){h.call(o,"annotation-edit",a,b,t)}))).className+=" highcharts-annotation-edit-button",c.style["background-image"]="url("+this.iconsURL+"edit.svg)"}}})),o(t,"Extensions/Annotations/Popup/PopupIndicators.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],(function(t,o,q,n,e){function r(a){var b=m("div",{className:"highcharts-popup-lhs-col"},void 0,a);return a=m("div",{className:"highcharts-popup-rhs-col"},void 0,a),m("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,a),{lhsCol:b,rhsCol:a}}function a(a,o,n,e){var r=this,g=r.lang,h=o.querySelectorAll(".highcharts-popup-lhs-col")[0];o=o.querySelectorAll(".highcharts-popup-rhs-col")[0];var l="edit"===n;if(n=l?a.series:a.options.plotOptions||{},a||!n){var v,p=[];l||C(n)?C(n)&&(p=c.call(this,n)):p=u.call(this,n,e),P(p,(function(a,b){return(a=a.indicatorFullName.toLowerCase())<(b=b.indicatorFullName.toLowerCase())?-1:a>b?1:0})),h.children[1]&&h.children[1].remove();var A=m("ul",{className:"highcharts-indicator-list"},void 0,h),E=o.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];p.forEach((function(o){var n=o.indicatorFullName,e=o.indicatorType,g=o.series;(v=m("li",{className:"highcharts-indicator-list"},void 0,A)).appendChild(y.createTextNode(n)),["click","touchstart"].forEach((function(o){x(v,o,(function(){var o=E.parentNode.children[1],n=g.params||g.options.params;E.innerHTML=t.emptyHTML,m("h3",{className:"highcharts-indicator-title"},void 0,E).appendChild(y.createTextNode(d(g,e).indicatorFullName)),m("input",{type:"hidden",name:"highcharts-type-"+e,value:e},void 0,E),f.call(r,e,"series",a,E,g,g.linkedParent&&g.linkedParent.options.id),n.volumeSeriesID&&f.call(r,e,"volume",a,E,g,g.linkedParent&&n.volumeSeriesID),b.call(r,a,"params",n,e,E),o&&(o.style.display="block"),l&&g.options&&m("input",{type:"hidden",name:"highcharts-id-"+e,value:g.options.id},void 0,E).setAttribute("highcharts-data-series-id",g.options.id)}))}))})),0<A.childNodes.length?A.childNodes[0].click():l||(t.setElementHTML(E.parentNode.children[0],g.noFilterMatch||""),E.parentNode.children[1].style.display="none")}}function b(a,t,o,n,e){var r=this;if(a){var h=this.addInput;k(o,(function(o,c){var d=t+"."+c;A(o)&&d&&(E(o)&&(h.call(r,d,n,e,{}),b.call(r,a,d,o,n,e)),d in v?(d=l.call(r,n,d,e),g.call(r,a,t,d,n,c,o)):"params.volumeSeriesID"===d||C(o)||h.call(r,d,n,e,{value:o,type:"number"}))}))}}function h(b,t){var o=this,n=t.querySelectorAll(".highcharts-popup-lhs-col")[0];t=this.lang.clearFilter,n=m("div",{className:"highcharts-input-wrapper"},void 0,n);var e=this.addInput("searchIndicators","input",n,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),g=m("a",{textContent:t},void 0,n);e.classList.add("highcharts-input-search-indicators"),g.classList.add("clear-filter-button"),x(e,"input",(function(t){a.call(o,b,o.container,"add",this.value),g.style.display=this.value.length?"inline-block":"none"})),["click","touchstart"].forEach((function(t){x(g,t,(function(){e.value="",a.call(o,b,o.container,"add",""),g.style.display="none"}))}))}function l(a,b,t){var o=b.split(".");o=o[o.length-1],a="highcharts-"+b+"-type-"+a;var n=this.lang;return m("label",{htmlFor:a},null,t).appendChild(y.createTextNode(n[o]||b)),(t=m("select",{name:a,className:"highcharts-popup-field",id:"highcharts-select-"+b},null,t)).setAttribute("id","highcharts-select-"+b),t}function g(a,b,t,o,n,e,g){"series"===b||"volume"===b?a.series.forEach((function(a){var o=a.options,n=o.name||o.params?a.name:o.id||"";"highcharts-navigator-series"!==o.id&&o.id!==(g&&g.options&&g.options.id)&&(A(e)||"volume"!==b||"column"!==a.type||(e=o.id),m("option",{value:o.id},void 0,t).appendChild(y.createTextNode(n)))})):o&&n&&w[n+"-"+o].forEach((function(a){m("option",{value:a},void 0,t).appendChild(y.createTextNode(a))})),A(e)&&(t.value=e)}function u(a,b){var t,o=this.chart&&this.chart.options.lang,n=o&&o.navigation&&o.navigation.popup&&o.navigation.popup.indicatorAliases,e=[];return k(a,(function(a,o){var r=a&&a.options;if(a.params||r&&r.params)if(o=(r=d(a,o)).indicatorFullName,r=r.indicatorType,b){var g=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");g=new RegExp(g,"i");var h=n&&n[r]&&n[r].join(" ")||"";(o.match(g)||h.match(g))&&(t={indicatorFullName:o,indicatorType:r,series:a},e.push(t))}else t={indicatorFullName:o,indicatorType:r,series:a},e.push(t)})),e}function c(a){var b=[];return a.forEach((function(a){a.is("sma")&&b.push({indicatorFullName:a.name,indicatorType:a.type,series:a})})),b}function d(a,b){var t=a.options,o=p[b]&&p[b].prototype.nameBase||b.toUpperCase();return t&&t.type&&(b=a.options.type,o=a.name),{indicatorFullName:o,indicatorType:b}}function f(a,b,t,o,n,e){t&&(a=l.call(this,a,b,o),g.call(this,t,b,a,void 0,void 0,void 0,n),A(e)&&(a.value=e))}var v,y=o.doc,p=n.seriesTypes,x=e.addEvent,m=e.createElement,A=e.defined,C=e.isArray,E=e.isObject,k=e.objectEach,P=e.stableSort;!function(a){a[a["params.algorithm"]=0]="params.algorithm",a[a["params.average"]=1]="params.average"}(v||(v={}));var w={"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]};return{addForm:function(b,t,o){if(t=this.lang,b){this.tabs.init.call(this,b);var n=this.container.querySelectorAll(".highcharts-tab-item-content");r(n[0]),h.call(this,b,n[0]),a.call(this,b,n[0],"add");var g=n[0].querySelectorAll(".highcharts-popup-rhs-col")[0];this.addButton(g,t.addButton||"add","add",g,o),r(n[1]),a.call(this,b,n[1],"edit"),g=n[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(g,t.saveButton||"save","edit",g,o),this.addButton(g,t.removeButton||"remove","remove",g,o)}},getAmount:function(){var a=0;return this.series.forEach((function(b){(b.params||b.options.params)&&a++})),a}}})),o(t,"Extensions/Annotations/Popup/PopupTabs.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],(function(t,o){function q(){return h("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,this.container)}function n(b,t){var o=this.container,n=this.lang,g="highcharts-tab-item";return 0===t&&(g+=" highcharts-tab-disabled"),(t=h("span",{className:g},void 0,o)).appendChild(a.createTextNode(n[b+"Button"]||b)),t.setAttribute("highcharts-data-tab-type",b),t}function e(a,b){var t=this.container.querySelectorAll(".highcharts-tab-item-content");a.className+=" highcharts-tab-item-active",t[b].className+=" highcharts-tab-item-show"}function r(a){var t=this;this.container.querySelectorAll(".highcharts-tab-item").forEach((function(o,n){0===a&&"edit"===o.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach((function(a){b(o,a,(function(){var a=t.container,b=a.querySelectorAll(".highcharts-tab-item");a=a.querySelectorAll(".highcharts-tab-item-content");for(var o=0;o<b.length;o++)b[o].classList.remove("highcharts-tab-item-active"),a[o].classList.remove("highcharts-tab-item-show");e.call(t,this,n)}))}))}))}var a=t.doc,b=o.addEvent,h=o.createElement;return{init:function(a){if(a){a=this.indicators.getAmount.call(a);var b=n.call(this,"add");n.call(this,"edit",a),q.call(this),q.call(this),r.call(this,a),e.call(this,b,0)}}}})),o(t,"Extensions/Annotations/Popup/Popup.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/DefaultOptions.js"],t["Extensions/Annotations/Popup/PopupAnnotations.js"],t["Extensions/Annotations/Popup/PopupIndicators.js"],t["Extensions/Annotations/Popup/PopupTabs.js"],t["Core/Utilities.js"]],(function(t,o,q,n,e,r,a){var h=o.doc,l=q.getOptions,g=a.addEvent,u=a.createElement;q=a.extend;var c=a.fireEvent,d=a.pick;return a=function(){function a(a,b,t){this.chart=t,this.iconsURL=b,this.lang=l().lang.navigation.popup,this.container=u("div",{className:"highcharts-popup highcharts-no-tooltip"},void 0,a),g(this.container,"mousedown",(function(){var a=t&&t.navigationBindings&&t.navigationBindings.activeAnnotation;if(a){a.cancelClick=!0;var b=g(o.doc,"click",(function(){setTimeout((function(){a.cancelClick=!1}),0),b()}))}})),this.addCloseBtn()}return a.prototype.init=function(b,t,o){a.call(this,b,t,o)},a.prototype.addCloseBtn=function(){var a=this,b=this.iconsURL,t=u("div",{className:"highcharts-popup-close"},void 0,this.container);t.style["background-image"]="url("+(b.match(/png|svg|jpeg|jpg|gif/gi)?b:b+"close.svg")+")",["click","touchstart"].forEach((function(b){g(t,b,(function(){a.chart?c(a.chart.navigationBindings,"closePopup"):a.closePopup()}))}))},a.prototype.addInput=function(a,b,t,o){var n=a.split(".");n=n[n.length-1];var g=this.lang;return(b="highcharts-"+b+"-"+d(o.htmlFor,n)).match(/\d/g)||u("label",{htmlFor:b,className:o.labelClassName},void 0,t).appendChild(h.createTextNode(g[n]||n)),(t=u("input",{name:b,value:o.value,type:o.type,className:"highcharts-popup-field"},void 0,t)).setAttribute("highcharts-data-name",a),t},a.prototype.addButton=function(a,t,o,n,e){var r=this,l=u("button",void 0,void 0,a);return l.appendChild(h.createTextNode(t)),e&&["click","touchstart"].forEach((function(a){g(l,a,(function(){return r.closePopup(),e(function(a,b){var t=Array.prototype.slice.call(a.querySelectorAll("input")),o=Array.prototype.slice.call(a.querySelectorAll("select")),n=a.querySelectorAll("#highcharts-select-series > option:checked")[0];a=a.querySelectorAll("#highcharts-select-volume > option:checked")[0];var e={actionType:b,linkedTo:n&&n.getAttribute("value")||"",fields:{}};return t.forEach((function(a){var b=a.getAttribute("highcharts-data-name");a.getAttribute("highcharts-data-series-id")?e.seriesId=a.value:b?e.fields[b]=a.value:e.type=a.value})),o.forEach((function(a){var b=a.id;"highcharts-select-series"!==b&&"highcharts-select-volume"!==b&&(b=b.split("highcharts-select-")[1],e.fields[b]=a.value)})),a&&(e.fields["params.volumeSeriesID"]=a.getAttribute("value")||""),e}(n,o))}))})),l},a.prototype.showPopup=function(){var a=this.container,b=a.querySelectorAll(".highcharts-popup-close")[0];this.formType=void 0,a.innerHTML=t.emptyHTML,0<=a.className.indexOf("highcharts-annotation-toolbar")&&(a.classList.remove("highcharts-annotation-toolbar"),a.removeAttribute("style")),a.appendChild(b),a.style.display="block",a.style.height=""},a.prototype.closePopup=function(){this.container.style.display="none"},a.prototype.showForm=function(a,b,t,o){b&&(this.showPopup(),"indicators"===a&&this.indicators.addForm.call(this,b,t,o),"annotation-toolbar"===a&&this.annotations.addToolbar.call(this,b,t,o),"annotation-edit"===a&&this.annotations.addForm.call(this,b,t,o),"flag"===a&&this.annotations.addForm.call(this,b,t,o,!0),this.formType=a,this.container.style.height=this.container.offsetHeight+"px")},a}(),q(a.prototype,{annotations:n,indicators:e,tabs:r}),a})),o(t,"Extensions/Annotations/Popup/PopupComposition.js",[t["Extensions/Annotations/Popup/Popup.js"],t["Core/Utilities.js"]],(function(t,o){function q(){this.popup&&this.popup.closePopup()}function n(a){this.popup||(this.popup=new t(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/10.2.1/gfx/stock-icons/",this.chart)),this.popup.showForm(a.formType,this.chart,a.options,a.onSubmit)}function e(a,b){this.inClass(b.target,"highcharts-popup")||a.apply(this,Array.prototype.slice.call(arguments,1))}var r=o.addEvent,a=o.wrap,b=[];return{compose:function(t,o){-1===b.indexOf(t)&&(b.push(t),r(t,"closePopup",q),r(t,"showPopup",n)),-1===b.indexOf(o)&&(b.push(o),a(o.prototype,"onContainerMouseDown",e))}}})),o(t,"Extensions/Annotations/Annotation.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/Annotations/AnnotationChart.js"],t["Extensions/Annotations/AnnotationDefaults.js"],t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllableRect.js"],t["Extensions/Annotations/Controllables/ControllableCircle.js"],t["Extensions/Annotations/Controllables/ControllableEllipse.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Extensions/Annotations/Controllables/ControllableImage.js"],t["Extensions/Annotations/Controllables/ControllableLabel.js"],t["Extensions/Annotations/ControlPoint.js"],t["Extensions/Annotations/EventEmitter.js"],t["Extensions/Annotations/MockPoint.js"],t["Extensions/Annotations/NavigationBindings.js"],t["Extensions/Annotations/Popup/PopupComposition.js"],t["Core/Utilities.js"]],(function(t,o,q,n,e,r,a,b,h,l,g,c,d,f,v,y){function u(a,b){var t={};return["labels","shapes"].forEach((function(o){var n=a[o];n&&(t[o]=b[o]?O(b[o]).map((function(a,b){return P(n[b],a)})):a[o])})),t}var x=this&&this.__extends||function(){var a=function(b,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var t in b)b.hasOwnProperty(t)&&(a[t]=b[t])},a(b,t)};return function(b,t){function o(){this.constructor=b}a(b,t),b.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),m=t.getDeferredAnimation,A=n.prototype,C=y.destroyObjectProperties,E=y.erase,k=y.fireEvent,P=y.merge,w=y.pick,O=y.splat;return t=function(t){function n(a,b){var o=t.call(this)||this;return o.annotation=void 0,o.coll="annotations",o.collection=void 0,o.animationConfig=void 0,o.graphic=void 0,o.group=void 0,o.labelCollector=void 0,o.labelsGroup=void 0,o.shapesGroup=void 0,o.chart=a,o.points=[],o.controlPoints=[],o.coll="annotations",o.labels=[],o.shapes=[],o.options=P(o.defaultOptions,b),o.userOptions=b,b=u(o.options,b),o.options.labels=b.labels,o.options.shapes=b.shapes,o.init(a,o.options),o}return x(n,t),n.compose=function(a,t,e){o.compose(n,a,t),l.compose(e),b.compose(a,e),f.compose(n,a),v.compose(f,t)},n.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},n.prototype.addLabels=function(){var a=this,b=this.options.labels||[];b.forEach((function(t,o){t=a.initLabel(t,o),P(!0,b[o],t.options)}))},n.prototype.addShapes=function(){var a=this,b=this.options.shapes||[];b.forEach((function(t,o){t=a.initShape(t,o),P(!0,b[o],t.options)}))},n.prototype.destroy=function(){var a=this.chart,b=function(a){a.destroy()};this.labels.forEach(b),this.shapes.forEach(b),this.clipYAxis=this.clipXAxis=null,E(a.labelCollectors,this.labelCollector),t.prototype.destroy.call(this),A.destroy.call(this),C(this,a)},n.prototype.destroyItem=function(a){E(this[a.itemType+"s"],a),a.destroy()},n.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},n.prototype.init=function(a,b,t){a=this.chart,b=this.options.animation,this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=m(a,b)},n.prototype.initLabel=function(a,b){return a=P(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},a),(b=new l(this,a,b)).itemType="label",this.labels.push(b),b},n.prototype.initShape=function(a,b){return a=P(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},a),(b=new n.shapesMap[a.type](this,a,b)).itemType="shape",this.shapes.push(b),b},n.prototype.redraw=function(a){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,a),this.redrawItems(this.labels,a),A.redraw.call(this,a)},n.prototype.redrawItem=function(a,b){a.linkPoints(),a.shouldBeDrawn()?(a.graphic||this.renderItem(a),a.redraw(w(b,!0)&&a.graphic.placed),a.points.length&&function(a){var b=a.graphic;a=a.points.some((function(a){return!1!==a.series.visible&&!1!==a.visible})),b&&(a?"hidden"===b.visibility&&b.show():b.hide())}(a)):this.destroyItem(a)},n.prototype.redrawItems=function(a,b){for(var t=a.length;t--;)this.redrawItem(a[t],b)},n.prototype.remove=function(){return this.chart.removeAnnotation(this)},n.prototype.render=function(){var a=this.chart.renderer;this.graphic=a.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=a.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=a.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),A.render.call(this)},n.prototype.renderItem=function(a){a.render("label"===a.itemType?this.labelsGroup:this.shapesGroup)},n.prototype.renderItems=function(a){for(var b=a.length;b--;)this.renderItem(a[b])},n.prototype.setClipAxes=function(){var a=this.chart.xAxis,b=this.chart.yAxis,t=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((function(t,o){return o=o&&(o.point||o.points&&o.points[0]),[a[o&&o.xAxis]||t[0],b[o&&o.yAxis]||t[1]]}),[]);this.clipXAxis=t[0],this.clipYAxis=t[1]},n.prototype.setControlPointsVisibility=function(a){var b=function(b){b.setControlPointsVisibility(a)};A.setControlPointsVisibility.call(this,a),this.shapes.forEach(b),this.labels.forEach(b)},n.prototype.setLabelCollector=function(){var a=this;a.labelCollector=function(){return a.labels.reduce((function(a,b){return b.options.allowOverlap||a.push(b.graphic),a}),[])},a.chart.labelCollectors.push(a.labelCollector)},n.prototype.setOptions=function(a){this.options=P(this.defaultOptions,a)},n.prototype.setVisibility=function(a){var b=this.options,t=this.chart.navigationBindings;a=w(a,!b.visible),this.graphic.attr("visibility",a?"inherit":"hidden"),a||(this.setControlPointsVisibility(!1),t.activeAnnotation===this&&t.popup&&"annotation-toolbar"===t.popup.formType&&k(t,"closePopup")),b.visible=a},n.prototype.update=function(a,b){var t=this.chart,o=u(this.userOptions,a),n=t.annotations.indexOf(this);(a=P(!0,this.userOptions,a)).labels=o.labels,a.shapes=o.shapes,this.destroy(),this.constructor(t,a),t.options.annotations[n]=a,this.isUpdating=!0,w(b,!0)&&t.redraw(),k(this,"afterUpdate"),this.isUpdating=!1},n.ControlPoint=g,n.MockPoint=d,n.shapesMap={rect:e,circle:r,ellipse:a,path:b,image:h},n.types={},n}(c),P(!0,t.prototype,n.prototype,P(t.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:q})),t})),o(t,"masters/modules/annotations.src.js",[t["Core/Globals.js"],t["Extensions/Annotations/Annotation.js"]],(function(t,o){t.Annotation=o,o.compose(t.Chart,t.Pointer,t.SVGRenderer)}))},t.exports?(h.default=h,t.exports=h):(e=[n(217)],void 0===(r=function(t){return h(t),h.Highcharts=t,h}.apply(o,e))||(t.exports=r))}}]);