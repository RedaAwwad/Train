/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{479:function(t,o,n){var e,r,l;l=function(t){"use strict";var o=t?t._modules:{};function n(t,path,o,n){t.hasOwnProperty(path)||(t[path]=n.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:path,module:t[path]}})))}n(o,"Extensions/Annotations/AnnotationChart.js",[o["Core/Utilities.js"]],(function(t){var o,n=t.addEvent,e=t.erase,r=t.find,l=t.fireEvent,h=t.pick,c=t.wrap,d=[];function f(t,o){var n=this.initAnnotation(t);return this.options.annotations.push(n.options),h(o,!0)&&(n.redraw(),n.graphic.attr({opacity:1})),n}function v(){var t=this;t.plotBoxClip=this.renderer.clipRect(this.plotBox),t.controlPointsGroup=t.renderer.g("control-points").attr({zIndex:99}).clip(t.plotBoxClip).add(),t.options.annotations.forEach((function(o,i){if(!t.annotations.some((function(t){return t.options===o}))){var n=t.initAnnotation(o);t.options.annotations[i]=n.options}})),t.drawAnnotations(),n(t,"redraw",t.drawAnnotations),n(t,"destroy",(function(){t.plotBoxClip.destroy(),t.controlPointsGroup.destroy()})),n(t,"exportData",(function(o){var n=t.annotations,e=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,r=!o.dataRows[1].xValues,l=t.options.lang&&t.options.lang.exportData&&t.options.lang.exportData.annotationHeader,h=o.dataRows[0].length,c=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.itemDelimiter,d=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.join;n.forEach((function(t){t.options.labelOptions&&t.options.labelOptions.includeInDataExport&&t.labels.forEach((function(label){if(label.options.text){var t=label.options.text;label.points.forEach((function(n){var e=n.x,r=n.series.xAxis?n.series.xAxis.options.index:-1,l=!1;if(-1===r){for(var f=o.dataRows[0].length,v=new Array(f),i=0;i<f;++i)v[i]="";v.push(t),v.xValues=[],v.xValues[r]=e,o.dataRows.push(v),l=!0}if(l||o.dataRows.forEach((function(o){!l&&o.xValues&&void 0!==r&&e===o.xValues[r]&&(d&&o.length>h?o[o.length-1]+=c+t:o.push(t),l=!0)})),!l){for(f=o.dataRows[0].length,v=new Array(f),i=0;i<f;++i)v[i]="";v[0]=e,v.push(t),v.xValues=[],void 0!==r&&(v.xValues[r]=e),o.dataRows.push(v)}}))}}))}));var f=0;o.dataRows.forEach((function(t){f=Math.max(f,t.length)}));for(var v,s,y=f-o.dataRows[0].length,i=0;i<y;i++){var header=(v=i+1,s=void 0,e&&!1!==(s=e(v))?s:(s=l+" "+v,r?{columnTitle:s,topLevelColumnTitle:s}:s));r?(o.dataRows[0].push(header.topLevelColumnTitle),o.dataRows[1].push(header.columnTitle)):o.dataRows[0].push(header)}}))}function y(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach((function(t){t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)}))}function x(t){var o=this.annotations,n="annotations"===t.coll?t:r(o,(function(o){return o.options.id===t}));n&&(l(n,"remove"),e(this.options.annotations,n.options),e(o,n),n.destroy())}function m(){this.annotations=[],this.options.annotations||(this.options.annotations=[])}function A(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))}return function(t){t.compose=function(t,o,e){if(-1===d.indexOf(o)){d.push(o),n(o,"afterInit",m);var r=o.prototype;r.addAnnotation=f,r.callbacks.push(v),r.collectionsWithInit.annotations=[f],r.collectionsWithUpdate.push("annotations"),r.drawAnnotations=y,r.removeAnnotation=x,r.initAnnotation=function(o){var n=new(t.types[o.type]||t)(this,o);return this.annotations.push(n),n}}if(-1===d.indexOf(e)){d.push(e);var l=e.prototype;c(l,"onContainerMouseDown",A)}}}(o||(o={})),o})),n(o,"Extensions/Annotations/AnnotationDefaults.js",[o["Core/Utilities.js"]],(function(t){var o=t.defined;return{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return o(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},zIndex:6}})),n(o,"Extensions/Annotations/EventEmitter.js",[o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o){var n=t.doc,e=t.isTouchDevice,r=o.addEvent,l=o.fireEvent,h=o.objectEach,c=o.pick,d=o.removeEvent;return function(){function t(){}return t.prototype.addEvents=function(){var t=this,o=function(element){r(element,e?"touchstart":"mousedown",(function(o){t.onMouseDown(o)}),{passive:!1})};if(o(this.graphic.element),(t.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&o(label.graphic.text.element)})),h(t.options.events,(function(o,n){var e=function(e){"click"===n&&t.cancelClick||o.call(t,t.chart.pointer.normalize(e),t.target)};-1===(t.nonDOMEvents||[]).indexOf(n)?t.graphic.on(n,e):r(t,n,e,{passive:!1})})),t.options.draggable&&(r(t,"drag",t.onDrag),!t.graphic.renderer.styledMode)){var n={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[t.options.draggable]};t.graphic.css(n),(t.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&label.graphic.text.css(n)}))}t.isUpdating||l(t,"add")},t.prototype.destroy=function(){this.removeDocEvents(),d(this),this.hcEvents=null},t.prototype.mouseMoveToRadians=function(t,o,n){var e,r=t.prevChartY-n,l=t.prevChartX-o,h=t.chartY-n,c=t.chartX-o;return this.chart.inverted&&(e=l,l=r,r=e,e=c,c=h,h=e),Math.atan2(h,c)-Math.atan2(r,l)},t.prototype.mouseMoveToScale=function(t,o,n){var e=t.prevChartX-o,r=t.prevChartY-n,l=(t.chartX-o||1)/(e||1),h=(t.chartY-n||1)/(r||1);if(this.chart.inverted){var c=h;h=l,l=c}return{x:l,y:h}},t.prototype.mouseMoveToTranslation=function(t){var o,n=t.chartX-t.prevChartX,e=t.chartY-t.prevChartY;return this.chart.inverted&&(o=e,e=n,n=o),{x:n,y:e}},t.prototype.onDrag=function(t){if(this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){var o=this.mouseMoveToTranslation(t);"x"===this.options.draggable&&(o.y=0),"y"===this.options.draggable&&(o.x=0);var n=this;n.points.length?n.translate(o.x,o.y):(n.shapes.forEach((function(t){return t.translate(o.x,o.y)})),n.labels.forEach((function(label){return label.translate(o.x,o.y)}))),this.redraw(!1)}},t.prototype.onMouseDown=function(t){if(t.preventDefault&&t.preventDefault(),2!==t.button){var o=this,h=o.chart.pointer,d=(t=h.normalize(t)).chartX,f=t.chartY;o.cancelClick=!1,o.chart.hasDraggedAnnotation=!0,o.removeDrag=r(n,e?"touchmove":"mousemove",(function(t){o.hasDragged=!0,(t=h.normalize(t)).prevChartX=d,t.prevChartY=f,l(o,"drag",t),d=t.chartX,f=t.chartY}),e?{passive:!1}:void 0),o.removeMouseUp=r(n,e?"touchend":"mouseup",(function(t){var n=c(o.target&&o.target.annotation,o.target);n&&(n.cancelClick=o.hasDragged),o.cancelClick=o.hasDragged,o.hasDragged=!1,o.chart.hasDraggedAnnotation=!1,l(c(n,o),"afterUpdate"),o.onMouseUp(t)}),e?{passive:!1}:void 0)}},t.prototype.onMouseUp=function(t){var o=this.chart,n=this.target||this,e=o.options.annotations,r=o.annotations.indexOf(n);this.removeDocEvents(),e[r]=n.options},t.prototype.removeDocEvents=function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},t}()})),n(o,"Extensions/Annotations/ControlPoint.js",[o["Extensions/Annotations/EventEmitter.js"],o["Core/Utilities.js"]],(function(t,o){var n,e=this&&this.__extends||(n=function(t,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},n(t,b)},function(t,b){function o(){this.constructor=t}n(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),r=o.merge,l=o.pick;return function(t){function o(o,n,e,r){var h=t.call(this)||this;return h.graphic=void 0,h.nonDOMEvents=["drag"],h.chart=o,h.target=n,h.options=e,h.index=l(e.index,r),h}return e(o,t),o.prototype.destroy=function(){t.prototype.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null},o.prototype.redraw=function(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))},o.prototype.render=function(){var t=this.chart,o=this.options;this.graphic=t.renderer.symbol(o.symbol,0,0,o.width,o.height).add(t.controlPointsGroup).css(o.style),this.setVisibility(o.visible),this.addEvents()},o.prototype.setVisibility=function(t){this.graphic[t?"show":"hide"](),this.options.visible=t},o.prototype.update=function(t){var o=this.chart,n=this.target,e=this.index,l=r(!0,this.options,t);this.destroy(),this.constructor(o,n,l,e),this.render(o.controlPointsGroup),this.redraw()},o}(t)})),n(o,"Extensions/Annotations/MockPoint.js",[o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"]],(function(t,o){var n=t.series.prototype,e=o.defined,r=o.fireEvent;return function(){function t(t,o,e){this.plotX=void 0,this.plotY=void 0,this.mock=!0,this.series={visible:!0,chart:t,getPlotBox:n.getPlotBox},this.target=o||null,this.options=e,this.applyOptions(this.getOptions())}return t.fromPoint=function(o){return new t(o.series.chart,null,{x:o.x,y:o.y,xAxis:o.series.xAxis,yAxis:o.series.yAxis})},t.pointToPixels=function(t,o){var n,e=t.series,r=e.chart,l=t.plotX||0,h=t.plotY||0;return r.inverted&&(t.mock?(l=t.plotY,h=t.plotX):(l=r.plotWidth-(t.plotY||0),h=r.plotHeight-(t.plotX||0))),e&&!o&&(l+=(n=e.getPlotBox()).translateX,h+=n.translateY),{x:l,y:h}},t.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},t.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},t.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},t.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},t.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},t.prototype.isInsidePlot=function(){var t=this.plotX,o=this.plotY,n=this.series.xAxis,l=this.series.yAxis,h={x:t,y:o,isInsidePlot:!0,options:{}};return n&&(h.isInsidePlot=e(t)&&t>=0&&t<=n.len),l&&(h.isInsidePlot=h.isInsidePlot&&e(o)&&o>=0&&o<=l.len),r(this.series.chart,"afterIsInsidePlot",h),h.isInsidePlot},t.prototype.refresh=function(){var t=this.series,o=t.xAxis,n=t.yAxis,e=this.getOptions();o?(this.x=e.x,this.plotX=o.toPixels(e.x,!0)):(this.x=void 0,this.plotX=e.x),n?(this.y=e.y,this.plotY=n.toPixels(e.y,!0)):(this.y=null,this.plotY=e.y),this.isInside=this.isInsidePlot()},t.prototype.refreshOptions=function(){var t=this.series,o=t.xAxis,n=t.yAxis;this.x=this.options.x=o?this.options.x=o.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=n?n.toValue(this.plotY,!0):this.plotY},t.prototype.rotate=function(t,o,n){if(!this.hasDynamicOptions()){var e=Math.cos(n),r=Math.sin(n),l=this.plotX-t,h=this.plotY-o,c=l*e-h*r,d=l*r+h*e;this.plotX=c+t,this.plotY=d+o,this.refreshOptions()}},t.prototype.scale=function(t,o,n,e){if(!this.hasDynamicOptions()){var r=this.plotX*n,l=this.plotY*e,h=(1-n)*t,c=(1-e)*o;this.plotX=h+r,this.plotY=c+l,this.refreshOptions()}},t.prototype.setAxis=function(t,o){var n=o+"Axis",r=t[n],l=this.series.chart;this.series[n]="object"==typeof r?r:e(r)?l[n][r]||l.get(r):null},t.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},t.prototype.translate=function(t,o,n,e){this.hasDynamicOptions()||(this.plotX+=n,this.plotY+=e,this.refreshOptions())},t}()})),n(o,"Extensions/Annotations/Controllables/Controllable.js",[o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r=e.isObject,l=e.isString,h=e.merge,c=e.splat,d=function(){function e(t,o,n,e){this.graphic=void 0,this.annotation=t,this.chart=t.chart,this.collection="label"===e?"labels":"shapes",this.options=o,this.points=[],this.controlPoints=[],this.index=n,this.itemType=e,this.init(t,o,n)}return e.prototype.addControlPoints=function(){var o=this,n=this.controlPoints,e=this.options.controlPoints||[];e.forEach((function(r,i){var l=h(o.options.controlPointOptions,r);l.index||(l.index=i),e[i]=l,n.push(new t(o.chart,o,l))}))},e.prototype.anchor=function(t){var o=t.series.getPlotBox(),e=t.series.chart,r=t.mock?t.toAnchor():n.prototype.getAnchor.call({chart:t.series.chart},t),l={x:r[0]+(this.options.x||0),y:r[1]+(this.options.y||0),height:r[2]||0,width:r[3]||0};return{relativePosition:l,absolutePosition:h(l,{x:l.x+(t.mock?o.translateX:e.plotLeft),y:l.y+(t.mock?o.translateY:e.plotTop)})}},e.prototype.attr=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.graphic.attr.apply(this.graphic,arguments)},e.prototype.attrsFromOptions=function(t){var o,n,map=this.constructor.attrsMap,e={},r=this.chart.styledMode;for(o in t)n=map[o],void 0===map[o]||r&&-1!==["fill","stroke","stroke-width"].indexOf(n)||(e[n]=t[o]);return e},e.prototype.destroy=function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach((function(t){return t.destroy()})),this.chart=null,this.points=null,this.controlPoints=null,this.options=null,this.annotation&&(this.annotation=null)},e.prototype.getPointsOptions=function(){var t=this.options;return t.points||t.point&&c(t.point)},e.prototype.init=function(t,o,n){this.annotation=t,this.chart=t.chart,this.options=o,this.points=[],this.controlPoints=[],this.index=n,this.linkPoints(),this.addControlPoints()},e.prototype.linkPoints=function(){var i,t,o=this.getPointsOptions(),n=this.points,e=o&&o.length||0;for(i=0;i<e;i++){if(!(t=this.point(o[i],n[i])))return void(n.length=0);t.mock&&t.refresh(),n[i]=t}return n},e.prototype.point=function(t,n){if(t&&t.series)return t;if(!n||null===n.series)if(r(t))n=new o(this.chart,this,t);else if(l(t))n=this.chart.get(t)||null;else if("function"==typeof t){var e=t.call(n,this);n=e.series?e:new o(this.chart,this,t)}return n},e.prototype.render=function(t){this.controlPoints.forEach((function(t){return t.render()}))},e.prototype.redraw=function(t){this.controlPoints.forEach((function(o){return o.redraw(t)}))},e.prototype.rotate=function(t,o,n){this.transform("rotate",t,o,n)},e.prototype.scale=function(t,o,n,e){this.transform("scale",t,o,n,e)},e.prototype.setControlPointsVisibility=function(t){this.controlPoints.forEach((function(o){o.setVisibility(t)}))},e.prototype.shouldBeDrawn=function(){return!!this.points.length},e.prototype.transform=function(t,o,n,e,r){var l=this;if(this.chart.inverted){var h=o;o=n,n=h}this.points.forEach((function(h,i){return l.transformPoint(t,o,n,e,r,i)}),this)},e.prototype.transformPoint=function(t,n,e,r,l,i){var h=this.points[i];h.mock||(h=this.points[i]=o.fromPoint(h)),h[t](n,e,r,l)},e.prototype.translate=function(t,o){this.transform("translate",null,null,t,o)},e.prototype.translatePoint=function(t,o,i){this.transformPoint("translate",null,null,t,o,i)},e.prototype.translateShape=function(t,o,n){var e=this.annotation.chart,r=this.annotation.userOptions,l=e.annotations.indexOf(this.annotation),h=e.options.annotations[l];this.translatePoint(t,o,0),n&&this.translatePoint(t,o,1),h[this.collection][this.index].point=this.options.point,r[this.collection][this.index].point=this.options.point},e.prototype.update=function(t){var o=this.annotation,n=h(!0,this.options,t),e=this.graphic.parentGroup;this.destroy(),this.constructor(o,n,this.index,this.itemType),this.render(e),this.redraw()},e}();return d})),n(o,"Extensions/Annotations/Controllables/ControllableDefaults.js",[],(function(){return{defaultMarkers:{arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}}}})),n(o,"Extensions/Annotations/Controllables/ControllablePath.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllableDefaults.js"],o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r,l=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},r(t,b)},function(t,b){function o(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),h=o.defaultMarkers,c=e.addEvent,d=e.defined,f=e.extend,v=e.merge,y=e.uniqueKey,x=[],m=E("marker-end"),A=E("marker-start"),C="rgba(192,192,192,"+(n.svg?1e-4:.002)+")";function E(t){return function(o){this.attr(t,"url(#"+o+")")}}function w(){this.options.defs=v(h,this.options.defs||{})}function k(t,o){var n={attributes:{id:t}},e={stroke:o.color||"none",fill:o.color||"rgba(0, 0, 0, 0.75)"};n.children=o.children&&o.children.map((function(t){return v(e,t)}));var r=v(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},o,n),marker=this.definition(r);return marker.id=t,marker}return function(t){function o(o,n,e){var r=t.call(this,o,n,e,"shape")||this;return r.type="path",r}return l(o,t),o.compose=function(t,o){-1===x.indexOf(t)&&(x.push(t),c(t,"afterGetContainer",w)),-1===x.indexOf(o)&&(x.push(o),o.prototype.addMarker=k)},o.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var o,n=this.points,e=n.length,r=[],l=e,h=n[0],c=l&&this.anchor(h).absolutePosition,d=0;if(c)for(r.push(["M",c.x,c.y]);++d<e&&l;)o=(h=n[d]).command||"L",c=this.anchor(h).absolutePosition,"M"===o||"L"===o?r.push([o,c.x,c.y]):"Z"===o&&r.push([o]),l=h.series.visible;return l&&this.graphic?this.chart.renderer.crispLine(r,this.graphic.strokeWidth()):null},o.prototype.shouldBeDrawn=function(){return t.prototype.shouldBeDrawn.call(this)||!!this.options.d},o.prototype.render=function(o){var n=this.options,e=this.attrsFromOptions(n);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(e).add(o),n.className&&this.graphic.addClass(n.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(o),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:C,fill:C,"stroke-width":this.graphic.strokeWidth()+2*n.snap}),t.prototype.render.call(this),f(this.graphic,{markerStartSetter:A,markerEndSetter:m}),this.setMarkers(this)},o.prototype.redraw=function(o){if(this.graphic){var n=this.toD(),e=o?"animate":"attr";n?(this.graphic[e]({d:n}),this.tracker[e]({d:n})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=!!n}t.prototype.redraw.call(this,o)},o.prototype.setMarkers=function(t){var o=t.options,n=t.chart,defs=n.options.defs,e=o.fill,r=d(e)&&"none"!==e?e:o.stroke;["markerStart","markerEnd"].forEach((function(e){var l,h,c,marker,d=o[e];if(d){for(c in defs)if((d===((l=defs[c]).attributes&&l.attributes.id)||d===l.id)&&"marker"===l.tagName){h=l;break}h&&(marker=t[e]=n.renderer.addMarker((o.id||y())+"-"+d,v(h,{color:r})),t.attr(e,marker.getAttribute("id")))}}))},o.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},o}(t)})),n(o,"Extensions/Annotations/Controllables/ControllableRect.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e,r=this&&this.__extends||(e=function(t,b){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},e(t,b)},function(t,b){function o(){this.constructor=t}e(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),l=n.merge;return function(t){function n(o,n,e){var r=t.call(this,o,n,e,"shape")||this;return r.type="rect",r.translate=t.prototype.translateShape,r}return r(n,t),n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(n).add(o),t.prototype.render.call(this)},n.prototype.redraw=function(o){if(this.graphic){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n)}t.prototype.redraw.call(this,o)},n.attrsMap=l(o.attrsMap,{width:"width",height:"height"}),n}(t)})),n(o,"Extensions/Annotations/Controllables/ControllableCircle.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e,r=this&&this.__extends||(e=function(t,b){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},e(t,b)},function(t,b){function o(){this.constructor=t}e(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),l=n.merge;return function(t){function n(o,n,e){var r=t.call(this,o,n,e,"shape")||this;return r.type="circle",r.translate=t.prototype.translateShape,r}return r(n,t),n.prototype.redraw=function(o){if(this.graphic){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!n}t.prototype.redraw.call(this,o)},n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(n).add(o),t.prototype.render.call(this)},n.prototype.setRadius=function(t){this.options.r=t},n.attrsMap=l(o.attrsMap,{r:"r"}),n}(t)})),n(o,"Extensions/Annotations/Controllables/ControllableEllipse.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e,r=this&&this.__extends||(e=function(t,b){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},e(t,b)},function(t,b){function o(){this.constructor=t}e(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),l=n.merge,h=n.defined;return function(t){function n(o,n,e){var r=t.call(this,o,n,e,"shape")||this;return r.type="ellipse",r}return r(n,t),n.prototype.init=function(o,n,e){h(n.yAxis)&&n.points.forEach((function(t){t.yAxis=n.yAxis})),h(n.xAxis)&&n.points.forEach((function(t){t.xAxis=n.xAxis})),t.prototype.init.call(this,o,n,e)},n.prototype.render=function(o){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(o),t.prototype.render.call(this)},n.prototype.translate=function(o,n){t.prototype.translateShape.call(this,o,n,!0)},n.prototype.getDistanceFromLine=function(t,o,n,e){return Math.abs((o.y-t.y)*n-(o.x-t.x)*e+o.x*t.y-o.y*t.x)/Math.sqrt((o.y-t.y)*(o.y-t.y)+(o.x-t.x)*(o.x-t.x))},n.prototype.getAttrs=function(t,o){var n=t.x,e=t.y,r=o.x,l=o.y,h=(n+r)/2,c=(e+l)/2,d=Math.sqrt((n-r)*(n-r)/4+(e-l)*(e-l)/4),f=(l-e)/(r-n),v=180*Math.atan(f)/Math.PI;return h<n&&(v+=180),{cx:h,cy:c,rx:d,ry:this.getRY(),angle:v}},n.prototype.getRY=function(){var t=this.getYAxis();return h(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry},n.prototype.getYAxis=function(){var t=this.options.yAxis;return this.chart.yAxis[t]},n.prototype.getAbsolutePosition=function(t){return this.anchor(t).absolutePosition},n.prototype.redraw=function(o){if(this.graphic){var n=this.getAbsolutePosition(this.points[0]),e=this.getAbsolutePosition(this.points[1]),r=this.getAttrs(n,e);n?this.graphic[o?"animate":"attr"]({cx:r.cx,cy:r.cy,rx:r.rx,ry:r.ry,rotation:r.angle,rotationOriginX:r.cx,rotationOriginY:r.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n)}t.prototype.redraw.call(this,o)},n.prototype.setYRadius=function(t){var o=this.annotation.userOptions.shapes;this.options.ry=t,o&&o[0]&&(o[0].ry=t,o[0].ry=t)},n.attrsMap=l(o.attrsMap,{ry:"ry"}),n}(t)})),n(o,"Extensions/Annotations/Controllables/ControllableLabel.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Core/FormatUtilities.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r){var l,h=this&&this.__extends||(l=function(t,b){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},l(t,b)},function(t,b){function o(){this.constructor=t}l(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),c=o.format,d=r.extend,f=r.isNumber,v=r.pick,y=[];function x(t,o,n,e,r){var path,l,h=r&&r.anchorX,c=r&&r.anchorY,d=n/2;return f(h)&&f(c)&&(path=[["M",h,c]],(l=o-c)<0&&(l=-e-l),l<n&&(d=h<t+n/2?l:n-l),c>o+e?path.push(["L",t+d,o+e]):c<o?path.push(["L",t+d,o]):h<t?path.push(["L",t,o+e/2]):h>t+n&&path.push(["L",t+n,o+e/2])),path||[]}var m=function(t){function o(o,n,e){return t.call(this,o,n,e,"label")||this}return h(o,t),o.alignedPosition=function(t,o){var n,e,r=t.align,l=t.verticalAlign,h=(o.x||0)+(t.x||0),c=(o.y||0)+(t.y||0);return"right"===r?n=1:"center"===r&&(n=2),n&&(h+=(o.width-(t.width||0))/n),"bottom"===l?e=1:"middle"===l&&(e=2),e&&(c+=(o.height-(t.height||0))/e),{x:Math.round(h),y:Math.round(c)}},o.compose=function(t){-1===y.indexOf(t)&&(y.push(t),t.prototype.symbols.connector=x)},o.justifiedOptions=function(t,label,o,n){var e,r=o.align,l=o.verticalAlign,h=label.box?0:label.padding||0,c=label.getBBox(),d={align:r,verticalAlign:l,x:o.x,y:o.y,width:label.width,height:label.height},f=(n.x||0)-t.plotLeft,v=(n.y||0)-t.plotTop;return(e=f+h)<0&&("right"===r?d.align="left":d.x=(d.x||0)-e),(e=f+c.width-h)>t.plotWidth&&("left"===r?d.align="right":d.x=(d.x||0)+t.plotWidth-e),(e=v+h)<0&&("bottom"===l?d.verticalAlign="top":d.y=(d.y||0)-e),(e=v+c.height-h)>t.plotHeight&&("top"===l?d.verticalAlign="bottom":d.y=(d.y||0)+t.plotHeight-e),d},o.prototype.translatePoint=function(o,n){t.prototype.translatePoint.call(this,o,n,0)},o.prototype.translate=function(t,o){var n=this.annotation.chart,e=this.annotation.userOptions,r=n.annotations.indexOf(this.annotation),l=n.options.annotations[r];if(n.inverted){var h=t;t=o,o=h}this.options.x+=t,this.options.y+=o,l[this.collection][this.index].x=this.options.x,l[this.collection][this.index].y=this.options.y,e[this.collection][this.index].x=this.options.x,e[this.collection][this.index].y=this.options.y},o.prototype.render=function(n){var e=this.options,r=this.attrsFromOptions(e),style=e.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,e.shape,null,null,e.useHTML,null,"annotation-label").attr(r).add(n),this.annotation.chart.styledMode||("contrast"===style.color&&(style.color=this.annotation.chart.renderer.getContrast(o.shapesWithoutBackground.indexOf(e.shape)>-1?"#FFFFFF":e.backgroundColor)),this.graphic.css(e.style).shadow(e.shadow)),e.className&&this.graphic.addClass(e.className),this.graphic.labelrank=e.labelrank,t.prototype.render.call(this)},o.prototype.redraw=function(o){var n=this.options,text=this.text||n.format||n.text,label=this.graphic,e=this.points[0];if(label){label.attr({text:text?c(String(text),e.getLabelConfig(),this.annotation.chart):n.formatter.call(e,this)});var r=this.anchor(e),l=this.position(r);l?(label.alignAttr=l,l.anchorX=r.absolutePosition.x,l.anchorY=r.absolutePosition.y,label[o?"animate":"attr"](l)):label.attr({x:0,y:-9999}),label.placed=!!l,t.prototype.redraw.call(this,o)}else this.redraw(o)},o.prototype.anchor=function(o){var n=t.prototype.anchor.apply(this,arguments),e=this.options.x||0,r=this.options.y||0;return n.absolutePosition.x-=e,n.absolutePosition.y-=r,n.relativePosition.x-=e,n.relativePosition.y-=r,n},o.prototype.position=function(t){var r,l,h,c,f=this.graphic,y=this.annotation.chart,x=this.points[0],m=this.options,A=t.absolutePosition,C=t.relativePosition,E=x.series.visible&&n.prototype.isInsidePlot.call(x);if(f&&E){var w=f.width,k=void 0===w?0:w,P=f.height,O=void 0===P?0:P;m.distance?r=e.prototype.getPosition.call({chart:y,distance:v(m.distance,16)},k,O,{plotX:C.x,plotY:C.y,negative:x.negative,ttBelow:x.ttBelow,h:C.height||C.width}):m.positioner?r=m.positioner.call(this):(l={x:A.x,y:A.y,width:0,height:0},r=o.alignedPosition(d(m,{width:k,height:O}),l),"justify"===this.options.overflow&&(r=o.alignedPosition(o.justifiedOptions(y,f,m,r),l))),m.crop&&(h=r.x-y.plotLeft,c=r.y-y.plotTop,E=y.isInsidePlot(h,c)&&y.isInsidePlot(h+k,c+O))}return E?r:null},o.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},o.shapesWithoutBackground=["connector"],o}(t);return m})),n(o,"Extensions/Annotations/Controllables/ControllableImage.js",[o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllableLabel.js"]],(function(t,o){var n,e=this&&this.__extends||(n=function(t,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},n(t,b)},function(t,b){function o(){this.constructor=t}n(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)});return function(t){function n(o,n,e){var r=t.call(this,o,n,e,"shape")||this;return r.type="image",r.translate=t.prototype.translateShape,r}return e(n,t),n.prototype.render=function(o){var n=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(n).add(o),this.graphic.width=e.width,this.graphic.height=e.height,t.prototype.render.call(this)},n.prototype.redraw=function(n){if(this.graphic){var e=this.anchor(this.points[0]),r=o.prototype.position.call(this,e);r?this.graphic[n?"animate":"attr"]({x:r.x,y:r.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(r)}t.prototype.redraw.call(this,n)},n.attrsMap={width:"width",height:"height",zIndex:"zIndex"},n}(t)})),n(o,"Core/Chart/ChartNavigationComposition.js",[],(function(){var t;return function(t){t.compose=function(t){return t.navigation||(t.navigation=new o(t)),t};var o=function(){function t(t){this.updates=[],this.chart=t}return t.prototype.addUpdate=function(t){this.chart.navigation.updates.push(t)},t.prototype.update=function(t,o){var n=this;this.updates.forEach((function(e){e.call(n.chart,t,o)}))},t}();t.Additions=o}(t||(t={})),t})),n(o,"Extensions/Annotations/NavigationBindingsUtilities.js",[o["Core/Utilities.js"]],(function(t){var o=t.defined,n=t.isNumber,e=t.pick,r={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:r,getAssignedAxis:function(t){return t.filter((function(t){var o=t.axis.getExtremes(),r=o.min,l=o.max,h=e(t.axis.minPointOffset,0);return n(r)&&n(l)&&t.value>=r-h&&t.value<=l+h&&!t.axis.options.isInternal}))[0]},getFieldType:function(t,n){var e=r[t],l=typeof n;return o(e)&&(l=e),{string:"text",number:"number",boolean:"checkbox"}[l]}}})),n(o,"Extensions/Annotations/NavigationBindingsDefaults.js",[o["Extensions/Annotations/NavigationBindingsUtilities.js"],o["Core/Utilities.js"]],(function(t,o){var n=t.getAssignedAxis,e=o.isNumber,r=o.merge;return{lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),e=n(o.xAxis),l=n(o.yAxis),h=this.chart.options.navigation;if(e&&l)return this.chart.addAnnotation(r({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:e.value,y:l.value,xAxis:e.axis.options.index,yAxis:l.axis.options.index},r:5}]},h.annotationsOptions,h.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,o){var n,r=o.options.shapes,l=r&&r[0]&&r[0].point||{};if(e(l.xAxis)&&e(l.yAxis)){var h=this.chart.inverted,c=this.chart.xAxis[l.xAxis].toPixels(l.x),d=this.chart.yAxis[l.yAxis].toPixels(l.y);n=Math.max(Math.sqrt(Math.pow(h?d-t.chartX:c-t.chartX,2)+Math.pow(h?c-t.chartY:d-t.chartY,2)),5)}o.update({shapes:[{r:n}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),e=n(o.xAxis),l=n(o.yAxis),h=this.chart.options.navigation;if(e&&l)return this.chart.addAnnotation(r({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:e.axis.options.index,yAxis:l.axis.options.index,points:[{x:e.value,y:l.value},{x:e.value,y:l.value}],ry:1}]},h.annotationsOptions,h.bindings.ellipseAnnotation.annotationOptions))},steps:[function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[1]);n.translatePoint(t.chartX-e.x,t.chartY-e.y,1),n.redraw(!1)},function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[0]),r=n.getAbsolutePosition(n.points[1]),l=n.getDistanceFromLine(e,r,t.chartX,t.chartY),h=n.getYAxis(),c=Math.abs(h.toValue(0)-h.toValue(l));n.setYRadius(c),n.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),e=n(o.xAxis),l=n(o.yAxis);if(e&&l){var h=e.value,c=l.value,d=e.axis.options.index,f=l.axis.options.index,v=this.chart.options.navigation;return this.chart.addAnnotation(r({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:d,yAxis:f,x:h,y:c},{xAxis:d,yAxis:f,x:h,y:c},{xAxis:d,yAxis:f,x:h,y:c},{xAxis:d,yAxis:f,x:h,y:c},{command:"Z"}]}]},v.annotationsOptions,v.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(t,o){var e=o.options.shapes,r=e&&e[0]&&e[0].points||[],l=this.chart.pointer.getCoordinates(t),h=n(l.xAxis),c=n(l.yAxis);if(h&&c){var d=h.value,f=c.value;r[1].x=d,r[2].x=d,r[2].y=f,r[3].y=f,o.update({shapes:[{points:r}]})}}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),e=n(o.xAxis),l=n(o.yAxis),h=this.chart.options.navigation;if(e&&l)return this.chart.addAnnotation(r({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:e.axis.options.index,yAxis:l.axis.options.index,x:e.value,y:l.value},overflow:"none",crop:!0}]},h.annotationsOptions,h.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}})),n(o,"Extensions/Annotations/NavigationBindings.js",[o["Core/Chart/ChartNavigationComposition.js"],o["Core/Defaults.js"],o["Core/FormatUtilities.js"],o["Core/Globals.js"],o["Extensions/Annotations/NavigationBindingsDefaults.js"],o["Extensions/Annotations/NavigationBindingsUtilities.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h){var c=o.setOptions,d=n.format,f=e.doc,v=e.win,y=l.getFieldType,x=h.addEvent,m=h.attr,A=(h.defined,h.fireEvent),C=h.isArray,E=h.isFunction,w=h.isNumber,k=h.isObject,P=h.merge,O=h.objectEach,j=h.pick,B=[];function N(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}function M(){this.navigationBindings&&this.navigationBindings.destroy()}function T(){var t=this.options;t&&t.navigation&&t.navigation.bindings&&(this.navigationBindings=new I(this,t.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function _(){var t=this.navigationBindings,o="highcharts-disabled-btn";if(this&&t){var n=!1;if(this.series.forEach((function(t){!t.options.isInternal&&t.visible&&(n=!0)})),this.navigationBindings&&this.navigationBindings.container&&this.navigationBindings.container[0]){var e=this.navigationBindings.container[0];O(t.boundClassNames,(function(t,r){var l=e.querySelectorAll("."+r);if(l)for(var i=0;i<l.length;i++){var button=l[i],h=button.className;"normal"===t.noDataState||n?-1!==h.indexOf(o)&&button.classList.remove(o):-1===h.indexOf(o)&&(button.className+=" "+o)}}))}}}function D(){this.deselectAnnotation()}function L(){this.selectedButtonElement=null}function U(t){var o=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;P(!0,t.prototype.defaultOptions.events,{click:function(t){var n=this,e=n.chart.navigationBindings,r=e.activeAnnotation;o&&o.call(n,t),r!==n?(e.deselectAnnotation(),e.activeAnnotation=n,n.setControlPointsVisibility(!0),A(e,"showPopup",{annotation:n,formType:"annotation-toolbar",options:e.annotationToFields(n),onSubmit:function(data){if("remove"===data.actionType)e.activeAnnotation=!1,e.chart.removeAnnotation(n);else{var t={};e.fieldsToOptions(data.fields,t),e.deselectAnnotation();var o=t.typeOptions;"measure"===n.options.type&&(o.crosshairY.enabled=0!==o.crosshairY.strokeWidth,o.crosshairX.enabled=0!==o.crosshairX.strokeWidth),n.update(t)}}})):A(e,"closePopup"),t.activeAnnotation=!0}})}var I=function(){function o(t,o){this.boundClassNames=void 0,this.selectedButton=void 0,this.chart=t,this.options=o,this.eventsToUnbind=[],this.container=this.chart.container.getElementsByClassName(this.options.bindingsClassName||""),this.container.length||(this.container=f.getElementsByClassName(this.options.bindingsClassName||""))}return o.compose=function(t,n){-1===B.indexOf(t)&&(B.push(t),x(t,"remove",N),U(t),O(t.types,(function(t){U(t)}))),-1===B.indexOf(n)&&(B.push(n),x(n,"destroy",M),x(n,"load",T),x(n,"render",_)),-1===B.indexOf(o)&&(B.push(o),x(o,"closePopup",D),x(o,"deselectButton",L)),-1===B.indexOf(c)&&(B.push(c),c(r))},o.prototype.initEvents=function(){var t=this,o=t.chart,n=t.container,r=t.options;t.boundClassNames={},O(r.bindings||{},(function(o){t.boundClassNames[o.className]=o})),[].forEach.call(n,(function(o){t.eventsToUnbind.push(x(o,"click",(function(n){var e=t.getButtonEvents(o,n);e&&-1===e.button.className.indexOf("highcharts-disabled-btn")&&t.bindingsButtonClick(e.button,e.events,n)})))})),O(r.events||{},(function(o,n){E(o)&&t.eventsToUnbind.push(x(t,n,o,{passive:!1}))})),t.eventsToUnbind.push(x(o.container,"click",(function(n){!o.cancelClick&&o.isInsidePlot(n.chartX-o.plotLeft,n.chartY-o.plotTop,{visiblePlotOnly:!0})&&t.bindingsChartClick(this,n)}))),t.eventsToUnbind.push(x(o.container,e.isTouchDevice?"touchmove":"mousemove",(function(o){t.bindingsContainerMouseMove(this,o)}),e.isTouchDevice?{passive:!1}:void 0))},o.prototype.initUpdate=function(){var o=this;t.compose(this.chart).navigation.addUpdate((function(t){o.update(t)}))},o.prototype.bindingsButtonClick=function(button,t,o){var n=this,e=n.chart,r=e.renderer.boxWrapper,l=!0;n.selectedButtonElement&&(n.selectedButtonElement.classList===button.classList&&(l=!1),A(n,"deselectButton",{button:n.selectedButtonElement}),n.nextEvent&&(n.currentUserDetails&&"annotations"===n.currentUserDetails.coll&&e.removeAnnotation(n.currentUserDetails),n.mouseMoveEvent=n.nextEvent=!1)),l?(n.selectedButton=t,n.selectedButtonElement=button,A(n,"selectButton",{button:button}),t.init&&t.init.call(n,button,o),(t.start||t.steps)&&e.renderer.boxWrapper.addClass("highcharts-draw-mode")):(e.stockTools&&e.stockTools.toggleButtonActiveClass(button),r.removeClass("highcharts-draw-mode"),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null)},o.prototype.bindingsChartClick=function(t,o){t=this.chart;var n=this,e=n.activeAnnotation,r=n.selectedButton,l=t.renderer.boxWrapper;e&&(e.cancelClick||o.activeAnnotation||!o.target.parentNode||function(t,s){var o=v.Element.prototype,n=o.matches||o.msMatchesSelector||o.webkitMatchesSelector,e=null;if(o.closest)e=o.closest.call(t,s);else do{if(n.call(t,s))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return e}(o.target,".highcharts-popup")?e.cancelClick&&setTimeout((function(){e.cancelClick=!1}),0):A(n,"closePopup")),r&&r.start&&(n.nextEvent?(n.nextEvent(o,n.currentUserDetails),n.steps&&(n.stepIndex++,r.steps[n.stepIndex]?n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]:(A(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass("highcharts-draw-mode"),r.end&&r.end.call(n,o,n.currentUserDetails),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null))):(n.currentUserDetails=r.start.call(n,o),n.currentUserDetails&&r.steps?(n.stepIndex=0,n.steps=!0,n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]):(A(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass("highcharts-draw-mode"),n.steps=!1,n.selectedButton=null,r.end&&r.end.call(n,o,n.currentUserDetails))))},o.prototype.bindingsContainerMouseMove=function(t,o){this.mouseMoveEvent&&this.mouseMoveEvent(o,this.currentUserDetails)},o.prototype.fieldsToOptions=function(t,o){return O(t,(function(t,n){var e=parseFloat(t),path=n.split("."),r=path.length-1;if(!w(e)||t.match(/px/g)||n.match(/format/g)||(t=e),"undefined"!==t){var l=o;path.forEach((function(o,n){var e=j(path[n+1],"");r===n?l[o]=t:(l[o]||(l[o]=e.match(/\d/g)?[]:{}),l=l[o])}))}})),o},o.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},o.prototype.annotationToFields=function(t){var n=t.options,e=o.annotationsEditable,r=e.nestedOptions,l=j(n.type,n.shapes&&n.shapes[0]&&n.shapes[0].type,n.labels&&n.labels[0]&&n.labels[0].type,"label"),h=o.annotationsNonEditable[n.langKey]||[],c={langKey:n.langKey,type:l};function f(option,o,n,e,l){var c;n&&option&&-1===h.indexOf(o)&&((n.indexOf&&n.indexOf(o))>=0||n[o]||!0===n)&&(C(option)?(e[o]=[],option.forEach((function(t,i){k(t)?(e[o][i]={},O(t,(function(t,n){f(t,n,r[o],e[o][i],o)}))):f(t,0,r[o],e[o],o)}))):k(option)?(c={},C(e)?(e.push(c),c[o]={},c=c[o]):e[o]=c,O(option,(function(t,e){f(t,e,0===o?n:r[o],c,o)}))):"format"===o?e[o]=[d(option,t.labels[0].points[0]).toString(),"text"]:C(e)?e.push([option,y(l,option)]):e[o]=[option,y(o,option)])}return O(n,(function(option,t){"typeOptions"===t?(c[t]={},O(n[t],(function(o,n){f(o,n,r,c[t],n)}))):f(option,t,e[l],c,t)})),c},o.prototype.getClickedClassNames=function(t,o){for(var n,element=o.target,e=[];element;)if((n=m(element,"class"))&&(e=e.concat(n.split(" ").map((function(t){return[t,element]})))),(element=element.parentNode)===t)return e;return e},o.prototype.getButtonEvents=function(t,o){var n,e=this;return this.getClickedClassNames(t,o).forEach((function(t){e.boundClassNames[t[0]]&&!n&&(n={events:e.boundClassNames[t[0]],button:t[1]})})),n},o.prototype.update=function(t){this.options=P(!0,this.options,t),this.removeEvents(),this.initEvents()},o.prototype.removeEvents=function(){this.eventsToUnbind.forEach((function(t){return t()}))},o.prototype.destroy=function(){this.removeEvents()},o.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},o.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]},o}();return I})),n(o,"Extensions/Annotations/Popup/PopupAnnotations.js",[o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o){var n=t.doc,e=t.isFirefox,r=o.createElement,l=o.isArray,h=o.isObject,c=o.objectEach,d=o.pick,f=o.stableSort;function v(t,o,d,y,x,m){var A=this;if(o){var C,E,w=this.addInput,k=this.lang;c(y,(function(n,option){C=""!==d?d+"."+option:option,h(n)&&(!l(n)||l(n)&&h(n[0])?((E=k[option]||option).match(/\d/g)||x.push([!0,E,t]),v.call(A,t,o,C,n,x,!1)):x.push([A,C,"annotation",t,n]))})),m&&(f(x,(function(a){return a[1].match(/format/g)?-1:1})),e&&x.reverse(),x.forEach((function(t){!0===t[0]?r("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(n.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},w.apply(t[0],t.splice(1)))})))}}return{addForm:function(t,o,e,l){if(t){var h=this.container,c=this.lang,d=r("h2",{className:"highcharts-popup-main-title"},void 0,h);d.appendChild(n.createTextNode(c[o.langKey]||o.langKey||"")),d=r("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,h);var f=r("div",{className:"highcharts-popup-bottom-row"},void 0,h);v.call(this,d,t,"",o,[],!0),this.addButton(f,l?c.addButton||"Add":c.saveButton||"Save",l?"add":"save",h,e)}},addToolbar:function(t,o,e){var l=this,h=this.lang,c=this.container,f=this.showForm,v="highcharts-annotation-toolbar";-1===c.className.indexOf(v)&&(c.className+=" "+v),t&&(c.style.top=t.plotTop+10+"px"),r("span",void 0,void 0,c).appendChild(n.createTextNode(d(h[o.langKey]||o.langKey,o.shapes&&o.shapes[0].type,"")));var button=this.addButton(c,h.removeButton||"Remove","remove",c,e);button.className+=" highcharts-annotation-remove-button",button.style["background-image"]="url("+this.iconsURL+"destroy.svg)",(button=this.addButton(c,h.editButton||"Edit","edit",c,(function(){f.call(l,"annotation-edit",t,o,e)}))).className+=" highcharts-annotation-edit-button",button.style["background-image"]="url("+this.iconsURL+"edit.svg)"}}})),n(o,"Extensions/Annotations/Popup/PopupIndicators.js",[o["Core/Renderer/HTML/AST.js"],o["Core/Globals.js"],o["Extensions/Annotations/NavigationBindingsUtilities.js"],o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r){var l,h=o.doc,c=n.annotationsFieldsTypes,d=e.seriesTypes,f=r.addEvent,v=r.createElement,y=r.defined,x=r.isArray,m=r.isObject,A=r.objectEach,C=r.stableSort;!function(t){t[t["params.algorithm"]=0]="params.algorithm",t[t["params.average"]=1]="params.average"}(l||(l={}));var E={"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]};function w(t){var o=v("div",{className:"highcharts-popup-lhs-col"},void 0,t),n=v("div",{className:"highcharts-popup-rhs-col"},void 0,t);return v("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,n),{lhsCol:o,rhsCol:n}}function k(o,n,e,r){var l=n.params||n.options.params;r.innerHTML=t.emptyHTML,v("h3",{className:"highcharts-indicator-title"},void 0,r).appendChild(h.createTextNode(_(n,e).indicatorFullName)),v("input",{type:"hidden",name:"highcharts-type-"+e,value:e},void 0,r),D.call(this,e,"series",o,r,n,n.linkedParent&&n.linkedParent.options.id),l.volumeSeriesID&&D.call(this,e,"volume",o,r,n,n.linkedParent&&l.volumeSeriesID),O.call(this,o,"params",l,e,r)}function P(o,n,e,filter){var r=this,l=r.lang,c=n.querySelectorAll(".highcharts-popup-lhs-col")[0],d=n.querySelectorAll(".highcharts-popup-rhs-col")[0],y="edit"===e,m=y?o.series:o.options.plotOptions||{};if(o||!m){var A,E=[];y||x(m)?x(m)&&(E=T.call(this,m)):E=M.call(this,m,filter),C(E,(function(a,b){var t=a.indicatorFullName.toLowerCase(),o=b.indicatorFullName.toLowerCase();return t<o?-1:t>o?1:0})),c.children[1]&&c.children[1].remove();var w=v("ul",{className:"highcharts-indicator-list"},void 0,c),P=d.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];E.forEach((function(t){var n=t.indicatorFullName,e=t.indicatorType,l=t.series;(A=v("li",{className:"highcharts-indicator-list"},void 0,w)).appendChild(h.createTextNode(n)),["click","touchstart"].forEach((function(t){f(A,t,(function(){var button=P.parentNode.children[1];k.call(r,o,l,e,P),button&&(button.style.display="block"),y&&l.options&&v("input",{type:"hidden",name:"highcharts-id-"+e,value:l.options.id},void 0,P).setAttribute("highcharts-data-series-id",l.options.id)}))}))})),w.childNodes.length>0?w.childNodes[0].click():y||(t.setElementHTML(P.parentNode.children[0],l.noFilterMatch||""),P.parentNode.children[1].style.display="none")}}function O(t,o,n,e,r){var h=this;if(t){var d=this.addInput;A(n,(function(n,f){c[f];var v=o+"."+f;if(y(n)&&v)if(m(n)&&(d.call(h,v,e,r,{}),O.call(h,t,v,n,e,r)),v in l){var A=B.call(h,e,v,r);N.call(h,t,o,A,e,f,n)}else"params.volumeSeriesID"===v||x(n)||d.call(h,v,e,r,{value:n,type:"number"})}))}}function j(t,o){var n=this,e=o.querySelectorAll(".highcharts-popup-lhs-col")[0],r=this.lang.clearFilter,l=v("div",{className:"highcharts-input-wrapper"},void 0,e),h=function(o){P.call(n,t,n.container,"add",o)},input=this.addInput("searchIndicators","input",l,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),button=v("a",{textContent:r},void 0,l);input.classList.add("highcharts-input-search-indicators"),button.classList.add("clear-filter-button"),f(input,"input",(function(t){h(this.value),this.value.length?button.style.display="inline-block":button.style.display="none"})),["click","touchstart"].forEach((function(t){f(button,t,(function(){input.value="",h(""),button.style.display="none"}))}))}function B(t,o,n){var e=o.split("."),r=e[e.length-1],l="highcharts-"+o+"-type-"+t,c=this.lang;v("label",{htmlFor:l},null,n).appendChild(h.createTextNode(c[r]||o));var d=v("select",{name:l,className:"highcharts-popup-field",id:"highcharts-select-"+o},null,n);return d.setAttribute("id","highcharts-select-"+o),d}function N(t,o,n,e,r,l,c){"series"===o||"volume"===o?t.series.forEach((function(t){var e=t.options,r=e.name||e.params?t.name:e.id||"";"highcharts-navigator-series"!==e.id&&e.id!==(c&&c.options&&c.options.id)&&(y(l)||"volume"!==o||"column"!==t.type||(l=e.id),v("option",{value:e.id},void 0,n).appendChild(h.createTextNode(r)))})):e&&r&&E[r+"-"+e].forEach((function(element){v("option",{value:element},void 0,n).appendChild(h.createTextNode(element))})),y(l)&&(n.value=l)}function M(t,filter){var o,n=this,e=(n.indicators,n.chart&&n.chart.options.lang),r=e&&e.navigation&&e.navigation.popup&&e.navigation.popup.indicatorAliases,l=[];return A(t,(function(t,n){var e=t&&t.options;if(t.params||e&&e.params){var h=_(t,n),c=h.indicatorFullName,d=h.indicatorType;if(filter){var f=filter.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),v=new RegExp(f,"i"),y=r&&r[d]&&r[d].join(" ")||"";(c.match(v)||y.match(v))&&(o={indicatorFullName:c,indicatorType:d,series:t},l.push(o))}else o={indicatorFullName:c,indicatorType:d,series:t},l.push(o)}})),l}function T(t){var o=[];return t.forEach((function(t){t.is("sma")&&o.push({indicatorFullName:t.name,indicatorType:t.type,series:t})})),o}function _(t,o){var n=t.options,e=d[o]&&d[o].prototype.nameBase||o.toUpperCase(),r=o;return n&&n.type&&(r=t.options.type,e=t.name),{indicatorFullName:e,indicatorType:r}}function D(t,o,n,e,r,l){var h=this;if(h.indicators,n){var c=B.call(h,t,o,e);N.call(h,n,o,c,void 0,void 0,void 0,r),y(l)&&(c.value=l)}}return{addForm:function(t,o,n){var e,r=this.lang;if(t){this.tabs.init.call(this,t);var l=this.container.querySelectorAll(".highcharts-tab-item-content");w(l[0]),j.call(this,t,l[0]),P.call(this,t,l[0],"add"),e=l[0].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(e,r.addButton||"add","add",e,n),w(l[1]),P.call(this,t,l[1],"edit"),e=l[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(e,r.saveButton||"save","edit",e,n),this.addButton(e,r.removeButton||"remove","remove",e,n)}},getAmount:function(){var t=0;return this.series.forEach((function(o){(o.params||o.options.params)&&t++})),t}}})),n(o,"Extensions/Annotations/Popup/PopupTabs.js",[o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o){var n=t.doc,e=o.addEvent,r=o.createElement;function l(){var t=this.container;return r("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,t)}function h(t,o){var e=this.container,l=this.lang,h="highcharts-tab-item";0===o&&(h+=" highcharts-tab-disabled");var c=r("span",{className:h},void 0,e);return c.appendChild(n.createTextNode(l[t+"Button"]||t)),c.setAttribute("highcharts-data-tab-type",t),c}function c(){for(var t=this.container,o=t.querySelectorAll(".highcharts-tab-item"),n=t.querySelectorAll(".highcharts-tab-item-content"),i=0;i<o.length;i++)o[i].classList.remove("highcharts-tab-item-active"),n[i].classList.remove("highcharts-tab-item-show")}function d(t,o){var n=this.container.querySelectorAll(".highcharts-tab-item-content");t.className+=" highcharts-tab-item-active",n[o].className+=" highcharts-tab-item-show"}function f(t){var o=this;this.container.querySelectorAll(".highcharts-tab-item").forEach((function(n,i){0===t&&"edit"===n.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach((function(t){e(n,t,(function(){c.call(o),d.call(o,this,i)}))}))}))}return{init:function(t){if(t){var o=this.indicators.getAmount.call(t),n=h.call(this,"add");h.call(this,"edit",o),l.call(this),l.call(this),f.call(this,o),d.call(this,n,0)}}}})),n(o,"Extensions/Annotations/Popup/Popup.js",[o["Core/Renderer/HTML/AST.js"],o["Core/Defaults.js"],o["Core/Globals.js"],o["Extensions/Annotations/Popup/PopupAnnotations.js"],o["Extensions/Annotations/Popup/PopupIndicators.js"],o["Extensions/Annotations/Popup/PopupTabs.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h){var c=o.getOptions,d=n.doc,f=h.addEvent,v=h.createElement,y=h.extend,x=h.fireEvent,m=h.pick,A=function(){function o(t,o,e){this.chart=e,this.iconsURL=o,this.lang=c().lang.navigation.popup,this.container=v("div",{className:"highcharts-popup highcharts-no-tooltip"},void 0,t),f(this.container,"mousedown",(function(){var t=e&&e.navigationBindings&&e.navigationBindings.activeAnnotation;if(t){t.cancelClick=!0;var o=f(n.doc,"click",(function(){setTimeout((function(){t.cancelClick=!1}),0),o()}))}})),this.addCloseBtn()}return o.prototype.init=function(t,n,e){o.call(this,t,n,e)},o.prototype.addCloseBtn=function(){var t=this,o=this.iconsURL,n=v("div",{className:"highcharts-popup-close"},void 0,this.container);n.style["background-image"]="url("+(o.match(/png|svg|jpeg|jpg|gif/gi)?o:o+"close.svg")+")",["click","touchstart"].forEach((function(o){f(n,o,(function(){if(t.chart){var o=t.chart.navigationBindings;x(o,"closePopup"),o&&o.selectedButtonElement&&x(o,"deselectButton",{button:o.selectedButtonElement})}else t.closePopup()}))}))},o.prototype.addInput=function(option,t,o,n){var e=option.split("."),r=e[e.length-1],l=this.lang,h="highcharts-"+t+"-"+m(n.htmlFor,r);r.match(/^\d+$/)||v("label",{htmlFor:h,className:n.labelClassName},void 0,o).appendChild(d.createTextNode(l[r]||r));var input=v("input",{name:h,value:n.value,type:n.type,className:"highcharts-popup-field"},void 0,o);return input.setAttribute("highcharts-data-name",option),input},o.prototype.addButton=function(t,label,o,n,e){var r=this,button=v("button",void 0,void 0,t);return button.appendChild(d.createTextNode(label)),e&&["click","touchstart"].forEach((function(t){f(button,t,(function(){return r.closePopup(),e(function(t,o){var n=Array.prototype.slice.call(t.querySelectorAll("input")),e=Array.prototype.slice.call(t.querySelectorAll("select")),r=t.querySelectorAll("#highcharts-select-series > option:checked")[0],l=t.querySelectorAll("#highcharts-select-volume > option:checked")[0],h={actionType:o,linkedTo:r&&r.getAttribute("value")||"",fields:{}};return n.forEach((function(input){var param=input.getAttribute("highcharts-data-name");input.getAttribute("highcharts-data-series-id")?h.seriesId=input.value:param?h.fields[param]=input.value:h.type=input.value})),e.forEach((function(select){var t=select.id;if("highcharts-select-series"!==t&&"highcharts-select-volume"!==t){var o=t.split("highcharts-select-")[1];h.fields[o]=select.value}})),l&&(h.fields["params.volumeSeriesID"]=l.getAttribute("value")||""),h}(n,o))}))})),button},o.prototype.showPopup=function(){var o=this.container,n="highcharts-annotation-toolbar",e=o.querySelectorAll(".highcharts-popup-close")[0];this.formType=void 0,o.innerHTML=t.emptyHTML,o.className.indexOf(n)>=0&&(o.classList.remove(n),o.removeAttribute("style")),o.appendChild(e),o.style.display="block",o.style.height=""},o.prototype.closePopup=function(){this.container.style.display="none"},o.prototype.showForm=function(t,o,n,e){o&&(this.showPopup(),"indicators"===t&&this.indicators.addForm.call(this,o,n,e),"annotation-toolbar"===t&&this.annotations.addToolbar.call(this,o,n,e),"annotation-edit"===t&&this.annotations.addForm.call(this,o,n,e),"flag"===t&&this.annotations.addForm.call(this,o,n,e,!0),this.formType=t,this.container.style.height=this.container.offsetHeight+"px")},o}();return y(A.prototype,{annotations:e,indicators:r,tabs:l}),A})),n(o,"Extensions/Annotations/Popup/PopupComposition.js",[o["Extensions/Annotations/Popup/Popup.js"],o["Core/Utilities.js"]],(function(t,o){var n=o.addEvent,e=o.wrap,r=[];function l(){this.popup&&this.popup.closePopup()}function h(o){this.popup||(this.popup=new t(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/10.3.3/gfx/stock-icons/",this.chart)),this.popup.showForm(o.formType,this.chart,o.options,o.onSubmit)}function c(t,o){this.inClass(o.target,"highcharts-popup")||t.apply(this,Array.prototype.slice.call(arguments,1))}return{compose:function(t,o){-1===r.indexOf(t)&&(r.push(t),n(t,"closePopup",l),n(t,"showPopup",h)),-1===r.indexOf(o)&&(r.push(o),e(o.prototype,"onContainerMouseDown",c))}}})),n(o,"Extensions/Annotations/Annotation.js",[o["Core/Animation/AnimationUtilities.js"],o["Extensions/Annotations/AnnotationChart.js"],o["Extensions/Annotations/AnnotationDefaults.js"],o["Extensions/Annotations/Controllables/Controllable.js"],o["Extensions/Annotations/Controllables/ControllableRect.js"],o["Extensions/Annotations/Controllables/ControllableCircle.js"],o["Extensions/Annotations/Controllables/ControllableEllipse.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Extensions/Annotations/Controllables/ControllableImage.js"],o["Extensions/Annotations/Controllables/ControllableLabel.js"],o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/EventEmitter.js"],o["Extensions/Annotations/MockPoint.js"],o["Extensions/Annotations/NavigationBindings.js"],o["Extensions/Annotations/Popup/PopupComposition.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h,c,d,f,v,y,x,m,A,C){var E,w=this&&this.__extends||(E=function(t,b){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},E(t,b)},function(t,b){function o(){this.constructor=t}E(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),k=t.getDeferredAnimation,P=e.prototype,O=(C.addEvent,C.destroyObjectProperties),j=C.erase,B=(C.extend,C.find,C.fireEvent),N=C.merge,M=C.pick,T=C.splat;function _(t,o){var n={};return["labels","shapes"].forEach((function(e){var r=t[e];r&&(o[e]?n[e]=T(o[e]).map((function(t,i){return N(r[i],t)})):n[e]=t[e])})),n}C.wrap;var D=function(t){function n(o,n){var e=t.call(this)||this;e.annotation=void 0,e.coll="annotations",e.collection=void 0,e.animationConfig=void 0,e.graphic=void 0,e.group=void 0,e.labelCollector=void 0,e.labelsGroup=void 0,e.shapesGroup=void 0,e.chart=o,e.points=[],e.controlPoints=[],e.coll="annotations",e.labels=[],e.shapes=[],e.options=N(e.defaultOptions,n),e.userOptions=n;var r=_(e.options,n);return e.options.labels=r.labels,e.options.shapes=r.shapes,e.init(o,e.options),e}return w(n,t),n.compose=function(t,e,r){o.compose(n,t,e),f.compose(r),c.compose(t,r),m.compose(n,t),A.compose(m,e)},n.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},n.prototype.addLabels=function(){var t=this,o=this.options.labels||[];o.forEach((function(n,i){var label=t.initLabel(n,i);N(!0,o[i],label.options)}))},n.prototype.addShapes=function(){var t=this,o=this.options.shapes||[];o.forEach((function(n,i){var e=t.initShape(n,i);N(!0,o[i],e.options)}))},n.prototype.destroy=function(){var o=this.chart,n=function(t){t.destroy()};this.labels.forEach(n),this.shapes.forEach(n),this.clipXAxis=null,this.clipYAxis=null,j(o.labelCollectors,this.labelCollector),t.prototype.destroy.call(this),P.destroy.call(this),O(this,o)},n.prototype.destroyItem=function(t){j(this[t.itemType+"s"],t),t.destroy()},n.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},n.prototype.init=function(t,o,n){var e=this.chart,r=this.options.animation;this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=k(e,r)},n.prototype.initLabel=function(t,o){var n=N(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),label=new f(this,n,o);return label.itemType="label",this.labels.push(label),label},n.prototype.initShape=function(t,o){var e=N(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},t),r=new n.shapesMap[e.type](this,e,o);return r.itemType="shape",this.shapes.push(r),r},n.prototype.redraw=function(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),P.redraw.call(this,t)},n.prototype.redrawItem=function(t,o){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(M(o,!0)&&t.graphic.placed),t.points.length&&function(t){var label=t.graphic,o=t.points.some((function(t){return!1!==t.series.visible&&!1!==t.visible}));label&&(o?"hidden"===label.visibility&&label.show():label.hide())}(t)):this.destroyItem(t)},n.prototype.redrawItems=function(t,o){for(var i=t.length;i--;)this.redrawItem(t[i],o)},n.prototype.remove=function(){return this.chart.removeAnnotation(this)},n.prototype.render=function(){var t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),P.render.call(this)},n.prototype.renderItem=function(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)},n.prototype.renderItems=function(t){for(var i=t.length;i--;)this.renderItem(t[i])},n.prototype.setClipAxes=function(){var t=this.chart.xAxis,o=this.chart.yAxis,n=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((function(n,e){var r=e&&(e.point||e.points&&e.points[0]);return[t[r&&r.xAxis]||n[0],o[r&&r.yAxis]||n[1]]}),[]);this.clipXAxis=n[0],this.clipYAxis=n[1]},n.prototype.setControlPointsVisibility=function(t){var o=function(o){o.setControlPointsVisibility(t)};P.setControlPointsVisibility.call(this,t),this.shapes.forEach(o),this.labels.forEach(o)},n.prototype.setLabelCollector=function(){var t=this;t.labelCollector=function(){return t.labels.reduce((function(t,label){return label.options.allowOverlap||t.push(label.graphic),t}),[])},t.chart.labelCollectors.push(t.labelCollector)},n.prototype.setOptions=function(t){this.options=N(this.defaultOptions,t)},n.prototype.setVisibility=function(t){var o=this.options,n=this.chart.navigationBindings,e=M(t,!o.visible);this.graphic.attr("visibility",e?"inherit":"hidden"),e||(this.setControlPointsVisibility(!1),n.activeAnnotation===this&&n.popup&&"annotation-toolbar"===n.popup.formType&&B(n,"closePopup")),o.visible=e},n.prototype.update=function(t,o){var n=this.chart,e=_(this.userOptions,t),r=n.annotations.indexOf(this),l=N(!0,this.userOptions,t);l.labels=e.labels,l.shapes=e.shapes,this.destroy(),this.constructor(n,l),n.options.annotations[r]=l,this.isUpdating=!0,M(o,!0)&&n.redraw(),B(this,"afterUpdate"),this.isUpdating=!1},n.ControlPoint=v,n.MockPoint=x,n.shapesMap={rect:r,circle:l,ellipse:h,path:c,image:d},n.types={},n}(y);return N(!0,D.prototype,e.prototype,N(D.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:n})),D})),n(o,"masters/modules/annotations.src.js",[o["Core/Globals.js"],o["Extensions/Annotations/Annotation.js"]],(function(t,o){var n=t;n.Annotation=o,o.compose(n.Chart,n.Pointer,n.SVGRenderer)}))},t.exports?(l.default=l,t.exports=l):(e=[n(219)],void 0===(r=function(t){return l(t),l.Highcharts=t,l}.apply(o,e))||(t.exports=r))}}]);