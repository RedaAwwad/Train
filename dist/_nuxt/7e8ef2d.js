/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{516:function(e,r,t){var o,n,d;d=function(e){"use strict";var r=e?e._modules:{};function t(e,path,r,t){e.hasOwnProperty(path)||(e[path]=t.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:path,module:e[path]}})))}t(r,"Extensions/DraggablePoints.js",[r["Core/Animation/AnimationUtilities.js"],r["Core/Chart/Chart.js"],r["Core/Globals.js"],r["Core/Series/Point.js"],r["Core/Series/Series.js"],r["Core/Series/SeriesRegistry.js"],r["Core/Utilities.js"]],(function(e,r,t,o,n,d,l){var h=e.animObject,c=d.seriesTypes,x=l.addEvent,f=l.clamp,m=l.isNumber,v=l.merge,y=l.objectEach,D=l.pick;function P(e){return{left:"right",right:"left",top:"bottom",bottom:"top"}[e]}var w=function(e){var r=e.shapeArgs||e.graphic.getBBox(),t=r.r||0,o=r.height-t,n=r.height/2;return[["M",0,t],["L",0,n-5],["A",1,1,0,0,0,0,n+5],["A",1,1,0,0,0,0,n-5],["M",0,n+5],["L",0,o]]},z=n.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!0}};c.flags&&(c.flags.prototype.dragDropProps=z);var H=c.column.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!1,resize:!0,beforeResize:function(e,r,t){var o,n,d=t.series.translatedThreshold,l=e.attr("y");r.y>=t.series.options.threshold?(o=e.attr("height"),n=d?d-(l+o):0,e.attr({height:Math.max(0,Math.round(o+n))})):e.attr({y:Math.round(l+(d?d-l:0))})},resizeSide:function(e,r){var t=r.series.chart.dragHandles,o=e.y>=(r.series.options.threshold||0)?"top":"bottom",n=P(o);return t[n]&&(t[n].destroy(),delete t[n]),o},handlePositioner:function(e){var r=e.shapeArgs||e.graphic&&e.graphic.getBBox()||{},t=e.series.yAxis.reversed,o=e.series.options.threshold||0,n=e.y||0,d=!t&&n>=o||t&&n<o;return{x:r.x||0,y:d?r.y||0:(r.y||0)+(r.height||0)}},handleFormatter:function(e){var r=e.shapeArgs||{},t=r.r||0,o=r.width||0,n=o/2;return[["M",t,0],["L",n-5,0],["A",1,1,0,0,0,n+5,0],["A",1,1,0,0,0,n-5,0],["M",n+5,0],["L",o-t,0]]}}};if(c.bullet&&(c.bullet.prototype.dragDropProps={x:H.x,y:H.y,target:{optionName:"draggableTarget",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){var r=e.targetGraphic.getBBox();return{x:e.barX,y:r.y+r.height/2}},handleFormatter:H.y.handleFormatter}}),c.columnrange&&(c.columnrange.prototype.dragDropProps={x:{axis:"x",move:!0},low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){var r=e.shapeArgs||e.graphic.getBBox();return{x:r.x||0,y:(r.y||0)+(r.height||0)}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.high}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){var r=e.shapeArgs||e.graphic.getBBox();return{x:r.x||0,y:r.y||0}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e>=r.low}}}),c.boxplot&&(c.boxplot.prototype.dragDropProps={x:H.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.lowPlot}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.q1}},q1:{optionName:"draggableQ1",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.q1Plot}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.median&&e>=r.low}},median:{axis:"y",move:!0},q3:{optionName:"draggableQ3",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.q3Plot}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.median}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.highPlot}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e>=r.q3}}}),c.ohlc&&(c.ohlc.prototype.dragDropProps={x:H.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotLow}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.open&&e<=r.close}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotHigh}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e>=r.open&&e>=r.close}},open:{optionName:"draggableOpen",axis:"y",move:!0,resize:!0,resizeSide:function(e){return e.open>=e.close?"top":"bottom"},handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotOpen}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.low}},close:{optionName:"draggableClose",axis:"y",move:!0,resize:!0,resizeSide:function(e){return e.open>=e.close?"bottom":"top"},handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotClose}},handleFormatter:H.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.low}}}),c.arearange){var S=c.columnrange.prototype.dragDropProps,A=function(e){var r=e.graphic?e.graphic.getBBox().width/2+1:4;return[["M",0-r,0],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]};c.arearange.prototype.dragDropProps={x:S.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){var r=e.lowerGraphic&&e.lowerGraphic.getBBox();return r?{x:r.x+r.width/2,y:r.y+r.height/2}:{x:-999,y:-999}},handleFormatter:A,propValidate:S.low.propValidate},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){var r=e.upperGraphic&&e.upperGraphic.getBBox();return r?{x:r.x+r.width/2,y:r.y+r.height/2}:{x:-999,y:-999}},handleFormatter:A,propValidate:S.high.propValidate}}}if(c.waterfall&&(c.waterfall.prototype.dragDropProps={x:H.x,y:v(H.y,{handleFormatter:function(e){return e.isSum||e.isIntermediateSum?null:H.y.handleFormatter(e)}})}),c.xrange){var B=function(e,r){var t=e.series,o=t.xAxis,n=t.yAxis,d=t.chart.inverted,l=o.toPixels(e[r],!0),h=n.toPixels(e.y,!0),c=t.columnMetrics?t.columnMetrics.offset:-e.shapeArgs.height/2;return d&&(l=o.len-l,h=n.len-h),h+=c,{x:Math.round(l),y:Math.round(h)}},N=c.xrange.prototype.dragDropProps={y:{axis:"y",move:!0},x:{optionName:"draggableX1",axis:"x",move:!0,resize:!0,resizeSide:"left",handlePositioner:function(e){return B(e,"x")},handleFormatter:w,propValidate:function(e,r){return e<=r.x2}},x2:{optionName:"draggableX2",axis:"x",move:!0,resize:!0,resizeSide:"right",handlePositioner:function(e){return B(e,"x2")},handleFormatter:w,propValidate:function(e,r){return e>=r.x}}};c.gantt&&(c.gantt.prototype.dragDropProps={y:N.y,start:v(N.x,{optionName:"draggableStart",validateIndividualDrag:function(e){return!e.milestone}}),end:v(N.x2,{optionName:"draggableEnd",validateIndividualDrag:function(e){return!e.milestone}})})}["gauge","pie","sunburst","wordcloud","sankey","histogram","pareto","vector","windbarb","treemap","bellcurve","sma","map","mapline"].forEach((function(e){c[e]&&(c[e].prototype.dragDropProps=null)}));var F={default:{className:"highcharts-drag-box-default",lineWidth:1,lineColor:"#888",color:"rgba(0, 0, 0, 0.1)",cursor:"move",zIndex:900}},M={className:"highcharts-drag-handle",color:"#fff",lineColor:"rgba(0, 0, 0, 0.6)",lineWidth:1,zIndex:901};function V(e){var i,r=["draggableX","draggableY"];for(y(e.dragDropProps,(function(e){e.optionName&&r.push(e.optionName)})),i=r.length;i--;)if(e.options.dragDrop[r[i]])return!0}function X(e,r){return void 0===e.chartX||void 0===e.chartY?r.pointer.normalize(e):e}function C(e,r,t,o){var n=r.map((function(r){return x(e,r,t,o)}));return function(){n.forEach((function(e){e()}))}}function Y(e,r,t){var o={chartX:e.chartX,chartY:e.chartY,guideBox:t&&{x:t.attr("x"),y:t.attr("y"),width:t.attr("width"),height:t.attr("height")},points:{}};return r.forEach((function(r){var t={};y(r.series.dragDropProps,(function(o,n){var d=r.series[o.axis+"Axis"];t[n]=r[n],t[n+"Offset"]=d.toPixels(r[n])-(d.horiz?e.chartX:e.chartY)})),t.point=r,o.points[r.id]=t})),o}function E(e,r){var t,o=function(e){var r=e.series,t=[],o=r.options.dragDrop.groupBy;return r.boosted?r.options.data.forEach((function(e,i){t.push((new r.pointClass).init(r,e)),t[t.length-1].index=i})):t=r.points,e.options[o]?t.filter((function(r){return r.options[o]===e.options[o]})):[e]}(r),n=r.series,d=n.chart;D(n.options.dragDrop&&n.options.dragDrop.liveRedraw,!0)||(d.dragGuideBox=t=n.getGuideBox(o),d.setGuideBoxState("default",n.options.dragDrop.guideBox).add(n.group)),d.dragDropData={origin:Y(e,o,t),point:r,groupedPoints:o,isDragging:!0}}function G(e,r){var t=e.dragDropData.newPoints,o=h(r);e.isDragDropAnimating=!0,y(t,(function(e){e.point.update(e.newValues,!1)})),e.redraw(o),setTimeout((function(){delete e.isDragDropAnimating,e.hoverPoint&&!e.dragHandles&&e.hoverPoint.showDragHandles()}),o.duration)}function O(e,r,t){var o,n,d=e.series,l=d.chart,h=l.dragDropData,c=d.dragDropProps[h.updateProp];n=h.newPoints[e.id].newValues,o="function"==typeof c.resizeSide?c.resizeSide(n,e):c.resizeSide,c.beforeResize&&c.beforeResize(l.dragGuideBox,n,e),function(rect,e,r){var t;switch(e){case"left":t={x:rect.attr("x")+r.x,width:Math.max(1,rect.attr("width")-r.x)};break;case"right":t={width:Math.max(1,rect.attr("width")+r.x)};break;case"top":t={y:rect.attr("y")+r.y,height:Math.max(1,rect.attr("height")-r.y)};break;case"bottom":t={height:Math.max(1,rect.attr("height")+r.y)}}rect.attr(t)}(l.dragGuideBox,"x"===c.axis&&d.xAxis.reversed||"y"===c.axis&&d.yAxis.reversed?P(o):o,{x:"x"===c.axis?r-(h.origin.prevdX||0):0,y:"y"===c.axis?t-(h.origin.prevdY||0):0})}function k(e){var r=e.series&&e.series.chart,t=r&&r.dragDropData;!r||!r.dragHandles||t&&(t.isDragging&&t.draggedPastSensitivity||t.isHoveringHandle===e.id)||r.hideDragHandles()}function j(e){var r=0;for(var p in e)Object.hasOwnProperty.call(e,p)&&r++;return r}function I(e){for(var p in e)if(Object.hasOwnProperty.call(e,p))return e[p]}function L(e,r){if(!r.zoomOrPanKeyPressed(e)){var t,o,n,d,l=r.dragDropData,h=0;l&&l.isDragging&&l.point.series&&(o=(t=l.point).series.options.dragDrop,e.preventDefault(),l.draggedPastSensitivity||(l.draggedPastSensitivity=function(e,r,t){var o=r.dragDropData.origin,n=o.chartX,d=o.chartY,l=e.chartX,h=e.chartY;return Math.sqrt((l-n)*(l-n)+(h-d)*(h-d))>t}(e,r,D(t.options.dragDrop&&t.options.dragDrop.dragSensitivity,o&&o.dragSensitivity,2))),l.draggedPastSensitivity&&(l.newPoints=function(e,r){var t=e.point,o=t.series,n=v(o.options.dragDrop,t.options.dragDrop),d={},l=e.updateProp,h={};return y(t.series.dragDropProps,(function(e,r){l&&(l!==r||!e.resize||e.optionName&&!1===n[e.optionName])||(l||e.move&&("x"===e.axis&&n.draggableX||"y"===e.axis&&n.draggableY))&&(d[r]=e)})),(l?[t]:e.groupedPoints).forEach((function(p){h[p.id]={point:p,newValues:p.getDropValues(e.origin,r,d)}})),h}(l,e),d=1===(h=j(n=l.newPoints))?I(n):null,t.firePointEvent("drag",{origin:l.origin,newPoints:l.newPoints,newPoint:d&&d.newValues,newPointId:d&&d.point.id,numNewPoints:h,chartX:e.chartX,chartY:e.chartY},(function(){!function(e,r){var t=r.series,o=t.chart,data=o.dragDropData,n=v(t.options.dragDrop,r.options.dragDrop),d=n.draggableX,l=n.draggableY,h=data.origin,c=e.chartX-h.chartX,x=e.chartY-h.chartY,f=c,m=data.updateProp;o.inverted&&(c=-x,x=-f),D(n.liveRedraw,!0)?(G(o,!1),r.showDragHandles()):m?O(r,c,x):o.dragGuideBox.translate(d?c:0,l?x:0),h.prevdX=c,h.prevdY=x}(e,t)}))))}}function K(e,r){var t=r.dragDropData;if(t&&t.isDragging&&t.draggedPastSensitivity&&t.point.series){var o=t.point,n=t.newPoints,d=j(n),l=1===d?I(n):null;r.dragHandles&&r.hideDragHandles(),e.preventDefault(),r.cancelClick=!0,o.firePointEvent("drop",{origin:t.origin,chartX:e.chartX,chartY:e.chartY,newPoints:n,numNewPoints:d,newPoint:l&&l.newValues,newPointId:l&&l.point.id},(function(){G(r)}))}delete r.dragDropData,r.dragGuideBox&&(r.dragGuideBox.destroy(),delete r.dragGuideBox)}function U(e,r){var t,o,n,d,l,h,c,x=r.hoverPoint,f=v(x&&x.series.options.dragDrop,x&&x.options.dragDrop),m=f.draggableX||!1,D=f.draggableY||!1;r.cancelClick=!1,!m&&!D||r.zoomOrPanKeyPressed(e)||r.hasDraggedAnnotation||(r.dragDropData&&r.dragDropData.isDragging?K(e,r):x&&(d=(t=x).series,l=d.options.dragDrop||{},h=t.options&&t.options.dragDrop,c=d.dragDropProps,y(c,(function(p){"x"===p.axis&&p.move?o=!0:"y"===p.axis&&p.move&&(n=!0)})),(l.draggableX&&o||l.draggableY&&n)&&(!h||!1!==h.draggableX||!1!==h.draggableY)&&d.yAxis&&d.xAxis)&&(r.mouseIsDown=!1,E(e,x),x.firePointEvent("dragStart",e)))}function R(e){var r=e.container,o=t.doc;(function(e){var i=e.series?e.series.length:0;if(e.hasCartesianSeries&&!e.polar)for(;i--;)if(e.series[i].options.dragDrop&&V(e.series[i]))return!0})(e)&&(C(r,["mousedown","touchstart"],(function(r){U(X(r,e),e)})),C(r,["mousemove","touchmove"],(function(r){L(X(r,e),e)}),{passive:!1}),x(r,"mouseleave",(function(r){K(X(r,e),e)})),e.unbindDragDropMouseUp=C(o,["mouseup","touchend"],(function(r){K(X(r,e),e)}),{passive:!1}),e.hasAddedDragDropEvents=!0,x(e,"destroy",(function(){e.unbindDragDropMouseUp&&e.unbindDragDropMouseUp()})))}r.prototype.setGuideBoxState=function(e,r){var t=this.dragGuideBox,o=v(F,r),n=v(o.default,o[e]);return t.attr({className:n.className,stroke:n.lineColor,strokeWidth:n.lineWidth,fill:n.color,cursor:n.cursor,zIndex:n.zIndex}).css({pointerEvents:"none"})},o.prototype.getDropValues=function(e,r,t){var o,n=this,d=n.series,l=v(d.options.dragDrop,n.options.dragDrop),h={},c=e.points[n.id];for(var x in t)if(Object.hasOwnProperty.call(t,x)){if(void 0!==o){o=!1;break}o=!0}return y(t,(function(e,t){var x=c[t],m=d[e.axis+"Axis"],v=function(e,r){var t=d[r.toLowerCase()+"Axis"].categories?1:0,o=D(l["dragPrecision"+r],t),n=D(l["dragMin"+r],-1/0),h=D(l["dragMax"+r],1/0),c=e;return o&&(c=Math.round(c/o)*o),f(c,n,h)}(m.toValue((m.horiz?r.chartX:r.chartY)+c[t+"Offset"]),e.axis.toUpperCase());o&&e.propValidate&&!e.propValidate(v,n)||void 0===x||(h[t]=v)})),h},n.prototype.getGuideBox=function(e){var r,t=this.chart,o=1/0,n=-1/0,d=1/0,l=-1/0;return e.forEach((function(e){var t=e.graphic&&e.graphic.getBBox()||e.shapeArgs;if(t){var h=void 0,c=e.x2;m(c)&&(h=e.series.xAxis.translate(c,!1,!1,!1,!0));var x=!(t.width||t.height||t.x||t.y);r=!0,o=Math.min(e.plotX||0,h||0,x?1/0:t.x||0,o),n=Math.max(e.plotX||0,h||0,(t.x||0)+(t.width||0),n),d=Math.min(e.plotY||0,x?1/0:t.y||0,d),l=Math.max((t.y||0)+(t.height||0),l)}})),r?t.renderer.rect(o,d,n-o,l-d):t.renderer.g()},o.prototype.showDragHandles=function(){var e=this,r=e.series,t=r.chart,o=t.renderer,n=v(r.options.dragDrop,e.options.dragDrop);y(r.dragDropProps,(function(d,l){var h,c,path,f=v(M,d.handleOptions,n.dragHandle),m={class:f.className,"stroke-width":f.lineWidth,fill:f.color,stroke:f.lineColor},y=f.pathFormatter||d.handleFormatter,D=d.handlePositioner,P=!d.validateIndividualDrag||d.validateIndividualDrag(e);if(d.resize&&P&&d.resizeSide&&y&&(n["draggable"+d.axis.toUpperCase()]||n[d.optionName])&&!1!==n[d.optionName]){t.dragHandles||(t.dragHandles={group:o.g("drag-drop-handles").add(r.markerGroup||r.group)}),t.dragHandles.point=e.id,h=D(e),m.d=path=y(e);var w=e.series.xAxis.categories?-.5:0;if(!path||h.x<w||h.y<0)return;m.cursor=f.cursor||("x"===d.axis!=!!t.inverted?"ew-resize":"ns-resize"),(c=t.dragHandles[d.optionName])||(c=t.dragHandles[d.optionName]=o.path().add(t.dragHandles.group)),c.translate(h.x,h.y).attr(m),C(c.element,["touchstart","mousedown"],(function(r){!function(e,r,t){var o=r.series.chart;o.zoomOrPanKeyPressed(e)||(o.mouseIsDown=!1,E(e,r),o.dragDropData.updateProp=e.updateProp=t,r.firePointEvent("dragStart",e),e.stopPropagation(),e.preventDefault())}(X(r,t),e,l)}),{passive:!1}),x(t.dragHandles.group.element,"mouseover",(function(){t.dragDropData=t.dragDropData||{},t.dragDropData.isHoveringHandle=e.id})),C(t.dragHandles.group.element,["touchend","mouseout"],(function(){!function(e){var r=e.series.chart;r.dragDropData&&e.id===r.dragDropData.isHoveringHandle&&delete r.dragDropData.isHoveringHandle,r.hoverPoint||k(e)}(e)}))}}))},r.prototype.hideDragHandles=function(){var e=this;e.dragHandles&&(y(e.dragHandles,(function(e,r){"group"!==r&&e.destroy&&e.destroy()})),e.dragHandles.group&&e.dragHandles.group.destroy&&e.dragHandles.group.destroy(),delete e.dragHandles)},x(o,"mouseOver",(function(){var e=this;setTimeout((function(){!function(e){var r=e.series,t=r&&r.chart,o=t&&t.dragDropData,n=t&&t.is3d&&t.is3d();!t||o&&o.isDragging&&o.draggedPastSensitivity||t.isDragDropAnimating||!r.options.dragDrop||n||(t.dragHandles&&t.hideDragHandles(),e.showDragHandles())}(e)}),12)})),x(o,"mouseOut",(function(){var e=this;setTimeout((function(){e.series&&k(e)}),10)})),x(o,"remove",(function(){var e=this.series.chart,r=e.dragHandles;r&&r.point===this.id&&e.hideDragHandles()})),r.prototype.zoomOrPanKeyPressed=function(e){var r=this.options.chart||{},t=r.panKey&&r.panKey+"Key";return e[r.zooming.key&&r.zooming.key+"Key"]||e[t]},x(r,"render",(function(){this.hasAddedDragDropEvents||R(this)}))})),t(r,"masters/modules/draggable-points.src.js",[],(function(){}))},e.exports?(d.default=d,e.exports=d):(o=[t(222)],void 0===(n=function(e){return d(e),d.Highcharts=e,d}.apply(r,o))||(e.exports=n))}}]);