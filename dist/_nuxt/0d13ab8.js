(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{471:function(o,t,e){var n,r,l;l=function(o){function q(o,t,e,n){o.hasOwnProperty(t)||(o[t]=n.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:o[t]}})))}q(o=o?o._modules:{},"Series/NodesComposition.js",[o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"]],(function(o,t){var a,e=(o=o.series).prototype,n=o.prototype.pointClass.prototype,r=t.defined,l=t.extend,g=t.find,d=t.merge,h=t.pick;return function(a){function o(){return this.data=[].concat(this.points||[],this.nodes),e.destroy.apply(this,arguments)}function t(){this.nodes&&(this.nodes.forEach((function(a){a.destroy()})),this.nodes.length=0),e.setData.apply(this,arguments)}function c(a){var o=arguments,t=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==a&&t.forEach((function(b){b&&b.series&&(n.setState.apply(b,o),b.isNode||(b.fromNode.graphic&&n.setState.apply(b.fromNode,o),b.toNode&&b.toNode.graphic&&n.setState.apply(b.toNode,o)))})),n.setState.apply(this,o)}function f(a,o,t,b){var e=this,r=this.series.options.nodes,l=this.series.options.data,c=l&&l.length||0,f=l&&l[this.index];n.update.call(this,a,!this.isNode&&o,t,b),this.isNode&&(a=(r||[]).reduce((function(b,a,o){return e.id===a.id?o:b}),-1),b=d(r&&r[a]||{},l&&l[this.index]||{}),l&&(f?l[this.index]=f:l.length=c),r?0<=a?r[a]=b:r.push(b):this.series.options.nodes=[b],h(o,!0)&&this.series.chart.redraw(t))}var p=[];a.compose=function(a,e){return-1===p.indexOf(a)&&(p.push(a),(a=a.prototype).setNodeState=c,a.setState=c,a.update=f),-1===p.indexOf(e)&&(p.push(e),(a=e.prototype).destroy=o,a.setData=t),e},a.createNode=function(a){var o=this.pointClass,t=function(b,a){return g(b,(function(b){return b.id===a}))},b=t(this.nodes,a);if(!b){t=this.options.nodes&&t(this.options.nodes,a);var e=(new o).init(this,l({className:"highcharts-node",isNode:!0,id:a,y:1},t));e.linksTo=[],e.linksFrom=[],e.getSum=function(){var b=0,a=0;return e.linksTo.forEach((function(a){b+=a.weight||0})),e.linksFrom.forEach((function(b){a+=b.weight||0})),Math.max(b,a)},e.offset=function(b,a){for(var o=0,t=0;t<e[a].length;t++){if(e[a][t]===b)return o;o+=e[a][t].weight}},e.hasShape=function(){var b=0;return e.linksTo.forEach((function(a){a.outgoing&&b++})),!e.linksTo.length||b!==e.linksTo.length},e.index=this.nodes.push(e)-1,b=e}return b.formatPrefix="node",b.name=b.name||b.options.id||"",b.mass=h(b.options.mass,b.options.marker&&b.options.marker.radius,this.options.marker&&this.options.marker.radius,4),b},a.destroy=o,a.generatePoints=function(){var a=this,o=this.chart,t={};e.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach((function(b){b.linksFrom.length=0,b.linksTo.length=0,b.level=b.options.level})),this.points.forEach((function(b){r(b.from)&&(t[b.from]||(t[b.from]=a.createNode(b.from)),t[b.from].linksFrom.push(b),b.fromNode=t[b.from],o.styledMode?b.colorIndex=h(b.options.colorIndex,t[b.from].colorIndex):b.color=b.options.color||t[b.from].color),r(b.to)&&(t[b.to]||(t[b.to]=a.createNode(b.to)),t[b.to].linksTo.push(b),b.toNode=t[b.to]),b.name=b.name||b.id}),this),this.nodeLookup=t},a.setNodeState=c,a.updateNode=f}(a||(a={})),a})),q(o,"Series/Sankey/SankeyPoint.js",[o["Core/Series/Point.js"],o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"]],(function(o,t,e){var n=this&&this.__extends||function(){var o=function(g,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var t in a)a.hasOwnProperty(t)&&(o[t]=a[t])},o(g,t)};return function(g,t){function e(){this.constructor=g}o(g,t),g.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),r=e.defined;return function(t){function g(){var o=null!==t&&t.apply(this,arguments)||this;return o.className=void 0,o.fromNode=void 0,o.level=void 0,o.linkBase=void 0,o.linksFrom=void 0,o.linksTo=void 0,o.mass=void 0,o.nodeX=void 0,o.nodeY=void 0,o.options=void 0,o.series=void 0,o.toNode=void 0,o}return n(g,t),g.prototype.applyOptions=function(t,e){return o.prototype.applyOptions.call(this,t,e),r(this.options.level)&&(this.options.column=this.column=this.options.level),this},g.prototype.getClassName=function(){return(this.isNode?"highcharts-node ":"highcharts-link ")+o.prototype.getClassName.call(this)},g.prototype.getFromNode=function(){for(var o,t=-1,a=0;a<this.linksTo.length;a++){var e=this.linksTo[a];e.fromNode.column>t&&e.fromNode!==this&&(t=(o=e.fromNode).column)}return{fromNode:o,fromColumn:t}},g.prototype.setNodeColumn=function(){r(this.options.column)||(this.column=0===this.linksTo.length?0:this.getFromNode().fromColumn+1)},g.prototype.isValid=function(){return this.isNode||"number"==typeof this.weight},g}(t.seriesTypes.column.prototype.pointClass)})),q(o,"Series/Sankey/SankeyColumnComposition.js",[o["Core/Utilities.js"]],(function(o){var t,e=o.defined,n=o.relativeLength;return function(o){o.compose=function(o,e){return o.sankeyColumn=new t(o,e),o};var t=function(){function o(o,t){this.points=o,this.series=t}return o.prototype.getTranslationFactor=function(o){for(var u,t=this.points,a=t.slice(),e=o.options.minLinkWidth||0,g=0,n=(o.chart.plotSizeY||0)-(o.options.borderWidth||0)-(t.length-1)*o.nodePadding;t.length;){for(g=n/t.sankeyColumn.sum(),o=!1,u=t.length;u--;)t[u].getSum()*g<e&&(t.splice(u,1),n-=e,o=!0);if(!o)break}return t.length=0,a.forEach((function(a){t.push(a)})),g},o.prototype.top=function(o){var t=this.series,a=t.nodePadding,e=this.points.reduce((function(e,g){return 0<e&&(e+=a),e+(g=Math.max(g.getSum()*o,t.options.minLinkWidth||0))}),0);return((t.chart.plotSizeY||0)-e)/2},o.prototype.left=function(o){var t=this.series,a=t.chart,e=t.options.equalNodes,g=a.inverted?a.plotHeight:a.plotWidth,n=t.nodePadding,r=this.points.reduce((function(a,p){return 0<a&&(a+=n),a+(p=e?g/p.series.nodes.length-n:Math.max(p.getSum()*o,t.options.minLinkWidth||0))}),0);return((a.plotSizeX||0)-Math.round(r))/2},o.prototype.sum=function(){return this.points.reduce((function(o,g){return o+g.getSum()}),0)},o.prototype.offset=function(o,g){var a=this.points,t=this.series,r=t.nodePadding,u=0;if(t.is("organization")&&o.hangsFrom)return{absoluteTop:o.hangsFrom.nodeY};for(var l=0;l<a.length;l++){var d=a[l].getSum(),p=Math.max(d*g,t.options.minLinkWidth||0),h=o.options[t.chart.inverted?"offsetHorizontal":"offsetVertical"],c=o.options.offset||0;if(d=d?p+r:0,a[l]===o)return{relativeTop:u+(e(h)?n(h,p):n(c,d))};u+=d}},o}();o.SankeyColumnAdditions=t}(t||(t={})),t})),q(o,"Series/TreeUtilities.js",[o["Core/Color/Color.js"],o["Core/Utilities.js"]],(function(o,t){var e=t.extend,n=t.isArray,q=t.isNumber,g=t.isObject,r=t.merge,l=t.pick;return{getColor:function(a,t){var e,g=t.index,n=t.mapOptionsToLevel,r=t.parentColor,d=t.parentColorIndex,p=t.series,h=t.colors,c=t.siblings,f=p.points,b=p.chart.options.chart;if(a){if(f=f[a.i],a=n[a.level]||{},n=f&&a.colorByPoint)var m=f.index%(h?h.length:b.colorCount),v=h&&h[m];p.chart.styledMode||(h=f&&f.options.color,b=a&&a.color,(e=r)&&(e=(e=a&&a.colorVariation)&&"brightness"===e.key&&g&&c?o.parse(r).brighten(g/c*e.to).get():r),e=l(h,b,v,e,p.color));var y=l(f&&f.options.colorIndex,a&&a.colorIndex,m,d,t.colorIndex)}return{color:e,colorIndex:y}},getLevelOptions:function(a){var o=null;if(g(a)){o={};var t=q(a.from)?a.from:1,e=a.levels,d={},h=g(a.defaults)?a.defaults:{};for(n(e)&&(d=e.reduce((function(a,o){if(g(o)&&q(o.level)){var e=r({},o),n=l(e.levelIsConstant,h.levelIsConstant);delete e.levelIsConstant,delete e.level,o=o.level+(n?0:t-1),g(a[o])?r(!0,a[o],e):a[o]=e}return a}),{})),e=q(a.to)?a.to:1,a=0;a<=e;a++)o[a]=r({},h,g(d[a])?d[a]:{})}return o},setTreeValues:function o(a,t){var n=t.before,r=t.idRoot,g=t.mapIdToNode[r],d=t.points[a.i],p=d&&d.options||{},h=[],c=0;return a.levelDynamic=a.level-(!1!==t.levelIsConstant?0:g.level),a.name=l(d&&d.name,""),a.visible=r===a.id||!0===t.visible,"function"==typeof n&&(a=n(a,t)),a.children.forEach((function(n,b){var r=e({},t);e(r,{index:b,siblings:a.children.length,visible:a.visible}),n=o(n,r),h.push(n),n.visible&&(c+=n.val)})),n=l(p.value,c),a.visible=0<=n&&(0<c||a.visible),a.children=h,a.childrenTotal=c,a.isLeaf=a.visible&&!c,a.val=n,a},updateRootId:function(a){if(g(a)){var o=g(a.options)?a.options:{};o=l(a.rootNode,o.rootId,""),g(a.userOptions)&&(a.userOptions.rootId=o),a.rootNode=o}return o}}})),q(o,"Series/Sankey/SankeySeries.js",[o["Core/Color/Color.js"],o["Core/Globals.js"],o["Series/NodesComposition.js"],o["Series/Sankey/SankeyPoint.js"],o["Core/Series/SeriesRegistry.js"],o["Series/Sankey/SankeyColumnComposition.js"],o["Series/TreeUtilities.js"],o["Core/Utilities.js"]],(function(o,t,e,n,q,r,g,l){var d=this&&this.__extends||function(){var a=function(o,b){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var o in a)a.hasOwnProperty(o)&&(b[o]=a[o])},a(o,b)};return function(o,b){function t(){this.constructor=o}a(o,b),o.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}}(),a=q.series,h=q.seriesTypes.column,c=g.getLevelOptions;g=l.extend;var u=l.isObject,f=l.merge,m=l.pick,p=l.relativeLength,v=l.stableSort;return l=function(a){function t(){var b=null!==a&&a.apply(this,arguments)||this;return b.colDistance=void 0,b.data=void 0,b.group=void 0,b.nodeLookup=void 0,b.nodePadding=void 0,b.nodes=void 0,b.nodeWidth=void 0,b.options=void 0,b.points=void 0,b.translationFactor=void 0,b}return d(t,a),t.getDLOptions=function(b){var a=u(b.optionsPoint)?b.optionsPoint.dataLabels:{};return b=u(b.level)?b.level.dataLabels:{},f({style:{}},b,a)},t.prototype.createNodeColumns=function(){var b=[];this.nodes.forEach((function(a){a.setNodeColumn(),b[a.column]||(b[a.column]=r.compose([],this)),b[a.column].push(a)}),this);for(var a=0;a<b.length;a++)void 0===b[a]&&(b[a]=r.compose([],this));return b},t.prototype.generatePoints=function(){function b(a,o){void 0===a.level&&(a.level=o,a.linksFrom.forEach((function(a){a.toNode&&b(a.toNode,o+1)})))}e.generatePoints.apply(this,arguments),this.orderNodes&&(this.nodes.filter((function(b){return 0===b.linksTo.length})).forEach((function(a){b(a,0)})),v(this.nodes,(function(b,a){return b.level-a.level})))},t.prototype.getNodePadding=function(){var b=this.options.nodePadding||0;if(this.nodeColumns){var a=this.nodeColumns.reduce((function(b,a){return Math.max(b,a.length)}),0);a*b>this.chart.plotSizeY&&(b=this.chart.plotSizeY/a)}return b},t.prototype.hasData=function(){return!!this.processedXData.length},t.prototype.pointAttribs=function(b,a){if(!b)return{};var t=this,e=t.mapOptionsToLevel[(b.isNode?b.level:b.fromNode.level)||0]||{},g=b.options,n=e.states&&e.states[a||""]||{};a=["colorByPoint","borderColor","borderWidth","linkOpacity","opacity"].reduce((function(a,b){return a[b]=m(n[b],g[b],e[b],t.options[b]),a}),{});var r=m(n.color,g.color,a.colorByPoint?b.color:e.color);return b.isNode?{fill:r,stroke:a.borderColor,"stroke-width":a.borderWidth,opacity:a.opacity}:{fill:o.parse(r).setOpacity(a.linkOpacity).get()}},t.prototype.render=function(){var a=this.points;this.points=this.points.concat(this.nodes||[]),h.prototype.render.call(this),this.points=a},t.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints(),this.nodeColumns=this.createNodeColumns(),this.nodeWidth=p(this.options.nodeWidth,this.chart.plotSizeX);var a=this,o=this.chart,t=this.options,g=this.nodeWidth,e=this.nodeColumns;this.nodePadding=this.getNodePadding(),this.translationFactor=e.reduce((function(b,o){return Math.min(b,o.sankeyColumn.getTranslationFactor(a))}),1/0),this.colDistance=(o.plotSizeX-g-t.borderWidth)/Math.max(1,e.length-1),a.mapOptionsToLevel=c({from:1,levels:t.levels,to:e.length-1,defaults:{borderColor:t.borderColor,borderRadius:t.borderRadius,borderWidth:t.borderWidth,color:a.color,colorByPoint:t.colorByPoint,levelIsConstant:!0,linkColor:t.linkColor,linkLineWidth:t.linkLineWidth,linkOpacity:t.linkOpacity,states:t.states}}),e.forEach((function(b){b.forEach((function(o){a.translateNode(o,b)}))}),this),this.nodes.forEach((function(b){b.linksFrom.forEach((function(b){(b.weight||b.isNull)&&b.to&&(a.translateLink(b),b.allowShadow=!1)}))}))},t.prototype.translateLink=function(a){var b=function(b,o){return o=b.offset(a,o)*g,Math.min(b.nodeY+o,b.nodeY+(b.shapeArgs&&b.shapeArgs.height||0)-n)},o=a.fromNode,t=a.toNode,e=this.chart,g=this.translationFactor,n=Math.max(a.weight*g,this.options.minLinkWidth),r=(e.inverted?-this.colDistance:this.colDistance)*this.options.curveFactor,l=b(o,"linksFrom");b=b(t,"linksTo");var p=o.nodeX,d=this.nodeWidth;t=t.nodeX;var q=a.outgoing,h=t>p+d;if(e.inverted&&(l=e.plotSizeY-l,b=(e.plotSizeY||0)-b,d=-d,n=-n,h=p>t),a.shapeType="path",a.linkBase=[l,l+n,b,b+n],h&&"number"==typeof b)a.shapeArgs={d:[["M",p+d,l],["C",p+d+r,l,t-r,b,t,b],["L",t+(q?d:0),b+n/2],["L",t,b+n],["C",t-r,b+n,p+d+r,l+n,p+d,l+n],["Z"]]};else if("number"==typeof b){r=t-20-n,q=t-20;var c=(h=p+d)+20,f=c+n,m=l,u=l+n,v=u+20,y=v+(e.plotHeight-l-n),k=y+20,C=k+n,N=b,S=N+n,x=S+20,L=k+.7*n,O=t-.7*n,P=h+.7*n;a.shapeArgs={d:[["M",h,m],["C",P,m,f,u-.7*n,f,v],["L",f,y],["C",f,L,P,C,h,C],["L",t,C],["C",O,C,r,L,r,y],["L",r,x],["C",r,S-.7*n,O,N,t,N],["L",t,S],["C",q,S,q,S,q,x],["L",q,y],["C",q,k,q,k,t,k],["L",h,k],["C",c,k,c,k,c,y],["L",c,v],["C",c,u,c,u,h,u],["Z"]]}}a.dlBox={x:p+(t-p+d)/2,y:l+(b-l)/2,height:n,width:0},a.tooltipPos=e.inverted?[e.plotSizeY-a.dlBox.y-n/2,e.plotSizeX-a.dlBox.x]:[a.dlBox.x,a.dlBox.y+n/2],a.y=a.plotY=1,a.x=a.plotX=1,a.color||(a.color=o.color)},t.prototype.translateNode=function(a,o){var b=this.translationFactor,e=this.chart,n=this.options,g=a.getSum(),r=Math.max(Math.round(g*b),this.options.minLinkWidth),l=Math.round(this.nodeWidth),d=Math.round(n.borderWidth)%2/2,h=o.sankeyColumn.offset(a,b);if(o=Math.floor(m(h.absoluteTop,o.sankeyColumn.top(b)+h.relativeTop))+d,d=Math.floor(this.colDistance*a.column+n.borderWidth/2)+p(a.options.offsetHorizontal||0,l)+d,d=e.inverted?e.plotSizeX-d:d,a.sum=g){a.shapeType="rect",a.nodeX=d,a.nodeY=o,g=d,b=o,h=a.options.width||n.width||l;var c=a.options.height||n.height||r;e.inverted&&(g=d-l,b=e.plotSizeY-o-r,h=a.options.height||n.height||l,c=a.options.width||n.width||r),a.dlOptions=t.getDLOptions({level:this.mapOptionsToLevel[a.level],optionsPoint:a.options}),a.plotX=1,a.plotY=1,a.tooltipPos=e.inverted?[e.plotSizeY-b-c/2,e.plotSizeX-g-h/2]:[g+h/2,b+c/2],a.shapeArgs={x:g,y:b,width:h,height:c,display:a.hasShape()?"":"none"}}else a.dlOptions={enabled:!1}},t.defaultOptions=f(h.defaultOptions,{borderWidth:0,colorByPoint:!0,curveFactor:.33,dataLabels:{enabled:!0,backgroundColor:"none",crop:!1,nodeFormat:void 0,nodeFormatter:function(){return this.point.name},format:void 0,formatter:function(){},inside:!0},inactiveOtherPoints:!0,linkOpacity:.5,opacity:1,minLinkWidth:0,nodeWidth:20,nodePadding:10,showInLegend:!1,states:{hover:{linkOpacity:1,opacity:1},inactive:{linkOpacity:.1,opacity:.1,animation:{duration:50}}},tooltip:{followPointer:!0,headerFormat:'<span style="font-size: 10px">{series.name}</span><br/>',pointFormat:"{point.fromNode.name} → {point.toNode.name}: <b>{point.weight}</b><br/>",nodeFormat:"{point.name}: <b>{point.sum}</b><br/>"}}),t}(h),e.compose(n,l),g(l.prototype,{animate:a.prototype.animate,createNode:e.createNode,forceDL:!0,invertible:!0,isCartesian:!1,orderNodes:!0,noSharedTooltip:!0,pointArrayMap:["from","to","weight"],pointClass:n,searchPoint:t.noop}),q.registerSeriesType("sankey",l),l})),q(o,"masters/modules/sankey.src.js",[],(function(){}))},o.exports?(l.default=l,o.exports=l):(n=[e(222)],void 0===(r=function(q){return l(q),l.Highcharts=q,l}.apply(t,n))||(o.exports=r))}}]);